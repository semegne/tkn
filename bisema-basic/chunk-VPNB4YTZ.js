import{a as j}from"./chunk-M6IFIDZJ.js";import{a as f}from"./chunk-S4UGDICD.js";import{b as S,c as m,d as w,e as x,f as F,g as d,i as E,l as P,m as k,s as M}from"./chunk-HZJXUBZX.js";import{b as L}from"./chunk-WNN6VJ2G.js";import"./chunk-D4X6XHNH.js";import{Ba as c,C as u,Hb as y,J as g,Qa as l,Ya as C,Z as r,ea as h,ia as b,oa as a,sa as e,ta as t,ua as o,va as v,wa as _}from"./chunk-YBJUVPDF.js";import"./chunk-4CLCTAJ7.js";var N=class s extends L{_authService=u(f);_router=u(y);loginForm=new F({subdomain:new d("",[m.required]),email:new d("",[m.required,m.email]),password:new d("",[m.required]),type:new d("user")});getControl(i){return this.loginForm.get(i)}login(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched(),this.loginForm.markAsDirty();return}this._authService.login(this.loginForm.value).subscribe({next:i=>{if(i.status=="error"){this.error(i.message);return}if(i.role==1){this.error("You are not authorized to login");return}this.success(i.message),this._storrageService.setItem("token",i.data),this._storrageService.setItem("subdomain",this.loginForm.value.subdomain),this._router.navigateByUrl("")},error:i=>{this.error(i.message)}})}static \u0275fac=(()=>{let i;return function(n){return(i||(i=g(s)))(n||s)}})();static \u0275cmp=h({type:s,selectors:[["app-login"]],features:[C([f]),b],decls:46,vars:8,consts:[[1,"d-flex","align-items-center","justify-content-center",2,"height","100vh"],[1,"card","w-md-100"],[1,"card-body","bg-purple"],[1,"text-center","text-white"],[3,"submit","formGroup"],[1,"form-group","mb-1"],[1,"input-group"],["type","text","placeholder","Please enter subdomain","formControlName","subdomain",1,"form-control"],[1,"input-group-append"],[1,"input-group-text","h-100"],["aria-hidden","true",1,"fa","fa-server"],[1,"text-white"],[3,"control","fieldLabel"],["type","text","placeholder","Your Email","formControlName","email",1,"form-control"],["aria-hidden","true",1,"fa","fa-envelope"],["type","password","placeholder","Your Password","formControlName","password",1,"form-control"],["aria-hidden","true",1,"fa","fa-key"],[1,"d-flex","justify-content-between"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","flexSwitchCheckDefault",1,"form-check-input"],[1,"d-flex"],["type","button",1,"btn","bg-light","me-2",3,"click"],[1,"input-group","d-flex","justify-content-end"],[1,"input-group-prepend"],["aria-hidden","true",1,"fa","fa-lock"],["type","submit",1,"btn","btn2","border-white",3,"disabled"],["aria-hidden","true",1,"fa","fa-arrow-right"]],template:function(p,n){p&1&&(e(0,"div",0)(1,"div",1)(2,"div",2),v(3),e(4,"h1",3),l(5,"BiSemA"),t(),e(6,"p",3),l(7,"Please enter your account details to login"),t(),e(8,"form",4),c("submit",function(){return n.login()}),e(9,"div",5)(10,"div",6),o(11,"input",7),e(12,"div",8)(13,"span",9),o(14,"i",10),t()()(),e(15,"label",11),o(16,"app-validation-error",12),t()(),e(17,"div",5)(18,"div",6),o(19,"input",13),e(20,"div",8)(21,"span",9),o(22,"i",14),t()()(),e(23,"label",11),o(24,"app-validation-error",12),t()(),e(25,"div",5)(26,"div",6),o(27,"input",15),e(28,"div",8)(29,"span",9),o(30,"i",16),t()()(),e(31,"label",11),o(32,"app-validation-error",12),t()(),e(33,"div",17)(34,"div",18),o(35,"input",19),t(),e(36,"div",20)(37,"button",21),c("click",function(){return n.loginForm.reset()}),l(38," Cancel "),t(),e(39,"div",22)(40,"div",23)(41,"span",9),o(42,"i",24),t()(),e(43,"button",25),o(44,"i",26),l(45," Login "),t()()()()(),_(),t()()()),p&2&&(r(8),a("formGroup",n.loginForm),r(8),a("control",n.getControl("subdomain"))("fieldLabel","Subdomain"),r(8),a("control",n.getControl("email"))("fieldLabel","Email"),r(8),a("control",n.getControl("password"))("fieldLabel","Password"),r(11),a("disabled",!n.loginForm.valid))},dependencies:[M,E,S,w,x,P,k,j],styles:[".card[_ngcontent-%COMP%]{width:35%}.project_table_header[_ngcontent-%COMP%]{font-size:14px!important;font-weight:700;position:relative;float:left;margin:8px 0}.project_table_header_border[_ngcontent-%COMP%]{border-top:1px solid #fff}.project_table_body[_ngcontent-%COMP%]{max-height:288px;overflow-y:auto}.project_error_message[_ngcontent-%COMP%]{width:100%}.new_project_button[_ngcontent-%COMP%]{margin:10px 10px 0 0}.project_table_even_row[_ngcontent-%COMP%]{background-color:#eedfff}.dialog[_ngcontent-%COMP%]{top:50%;left:50%;width:50em;margin-top:-9em;margin-left:-25em;position:fixed;border:none!important;z-index:9999}.dialog_overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000;opacity:.4;z-index:999}"]})};export{N as LoginComponent};
