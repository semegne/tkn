import{a as he}from"./chunk-6D3G3I2X.js";import{a as ue,b as me}from"./chunk-HR7DVQT6.js";import{a as Y,b as Z,d as ee,e as te,f as ie,g as v,h as ne,i as oe,j as re,k as le,l as ae,n as ce,o as de,p as pe,q as se}from"./chunk-G7Y2ZS3Y.js";import{b as _e}from"./chunk-Y6CEYV4J.js";import"./chunk-64QROMKM.js";import{Aa as u,Da as L,F as _,Fa as q,Fb as J,G as h,H as T,Ha as I,Ib as K,Na as $,Oa as a,Pa as C,Qa as b,Ra as A,U as E,V as k,Wa as M,X as l,Za as S,_a as B,ab as x,bb as y,ca as V,cb as z,ga as D,ha as f,kb as G,la as P,lb as j,ma as d,mb as R,nb as U,ob as H,pb as Q,qa as n,qb as W,ra as o,rb as X,sa as s,ta as N,ua as O,va as F,wa as w,za as g}from"./chunk-RPBBG52S.js";import"./chunk-4CLCTAJ7.js";var be=(r,i)=>({"text-danger":r,"text-success":i}),ve=(r,i)=>({"clr-red":r,"text-success":i}),Ce=(r,i)=>({option:r,index:i,margin:5}),xe=(r,i,t)=>({option:r,index:i,margin:t}),ye=(r,i)=>({"bg-purple text-white":r,"clr-grey":i});function we(r,i){if(r&1&&(n(0,"option",46),a(1),o()),r&2){let t=i.$implicit;L("value",t.folder),d("ngValue",t.url),l(),b(" ",t.fullName," ")}}function Se(r,i){r&1&&(n(0,"span"),a(1," / price:0"),o())}function $e(r,i){if(r&1&&(n(0,"span"),a(1),o()),r&2){let t=u().index,e=u();l(),A(" -> ",e.product.finish_labels[t]," | ",e.product.finish_prices[t],"")}}function Ee(r,i){if(r&1&&(n(0,"div"),F(1,51),o()),r&2){let t=i.$implicit,e=u().index;u();let c=$(120);l(),d("ngTemplateOutlet",c)("ngTemplateOutletContext",S(2,Ce,t,e))}}function ke(r,i){if(r&1){let t=w();n(0,"div",47)(1,"a",48),g("click",function(){let c=_(t).index,p=u();return h(p.finishCollapseToggle(c))}),a(2),f(3,Se,2,0,"span",49)(4,$e,2,2,"span",49),o(),n(5,"div",50,2),f(7,Ee,2,5,"div",23),o()()}if(r&2){let t=i.$implicit,e=i.index,c=u();l(),d("ngClass",S(6,ve,c.product.finish_labels[e]==" ??",c.product.finish_labels[e]!=" ??")),l(),b(" ",t.description," "),l(),d("ngIf",c.product.finish_prices[e]==0),l(),d("ngIf",c.product.finish_prices[e]!=0),l(),d("ngbCollapse",t.collapse),l(2),d("ngForOf",t.options)}}function Pe(r,i){if(r&1&&(n(0,"span"),a(1),o()),r&2){let t=i.$implicit;l(),C(t)}}function Fe(r,i){if(r&1&&(n(0,"div",52)(1,"a",53),s(2,"img",54),x(3,"lowercase"),x(4,"lowercase"),n(5,"div",55),a(6),o()()()),r&2){let t=i.$implicit,e=u();l(),q("routerLink","/catalogue/",e.product.catalogue_id,"/product/",t==null?null:t.id,""),l(),I("src","",e.media_url,"",e.product==null?null:e.product.company_code,"/",y(3,9,e.product==null?null:e.product.catalogue_code),"/prod_icons/",y(4,11,t.label),"_3d.png",k),l(4),b(" ",t.label," ")}}function Ie(r,i){if(r&1&&(n(0,"div"),F(1,51),o()),r&2){let t=i.$implicit,e=u(2),c=e.index,p=e.margin;u();let m=$(120);l(),d("ngTemplateOutlet",m)("ngTemplateOutletContext",B(2,xe,t,c,p+5))}}function Te(r,i){if(r&1){let t=w();N(0),n(1,"a",57),g("click",function(){_(t);let c=u().option;return h(c.sub_group.collapse=!c.sub_group.collapse)}),a(2),o(),n(3,"div",50,3),f(5,Ie,2,6,"div",23),o(),O()}if(r&2){let t=u(),e=t.option,c=t.margin;l(),P("style","margin-left: ",c,"px;",E),l(),b(" ",e.sub_group.description," "),l(),d("ngbCollapse",e.sub_group.collapse),l(2),d("ngForOf",e.sub_group.options)}}function Ve(r,i){if(r&1){let t=w();n(0,"a",58),g("click",function(){_(t);let c=u(),p=c.option,m=c.index,ge=u();return h(ge.finish(p.name,m,p.price))}),a(1),o()}if(r&2){let t=u(),e=t.option,c=t.index,p=t.margin,m=u();P("style","margin-left: ",p,"px;",E),d("ngClass",S(4,ye,e.name==m.product.finish_labels[c],e.name!=m.product.finish_labels[c])),l(),b(" ",e.description," ")}}function De(r,i){if(r&1&&f(0,Te,6,5,"ng-container",49)(1,Ve,2,7,"a",56),r&2){let t=i.option;d("ngIf",t.subgroup_id),l(),d("ngIf",!t.subgroup_id)}}var fe=class r extends _e{breadcrumbData={};product=null;price=null;qty=new v({value:"1",disabled:!0});autoCadForm=new ie({dwg_2d:new v(""),dxf_2d:new v(""),rvt_2d:new v(""),dwg_3d:new v(""),dxf_3d:new v(""),rvt_3d:new v("")});pdfs=[{fullName:"ANSI / BIFMA-Certificates",name:"anci_bifma_certificate.pdf",folder:"prod_certificates",url:`${this.media_url}${this.product?.company_code}/${this.product?.catalogue_code.toLowerCase()}/labels/${this.product?.category_label}/prod_certificates/${this.product?.category_label}.pdf`},{fullName:"Price Product Guide",name:"price_product_guide.pdf",folder:"price_guide",url:`${this.media_url}${this.product?.company_code}/${this.product?.catalogue_code.toLowerCase()}/labels/${this.product?.category_label}/price_guide/${this.product?.category_label}.pdf`},{fullName:"Installation Guide",name:"installation_guide.pdf",folder:"installation_guide",url:`${this.media_url}${this.product?.company_code}/${this.product?.catalogue_code.toLowerCase()}/labels/${this.product?.category_label}/installation_guide/${this.product?.category_label}.pdf`},{fullName:"Environment Data",name:"environment_report.pdf",folder:"env_data",url:`${this.media_url}${this.product?.company_code}/${this.product?.catalogue_code.toLowerCase()}/labels/${this.product?.category_label}/env_data/${this.product?.category_label}.pdf`}];getProduct(i){this._mainService.getProduct(i).subscribe({next:t=>{this.product=t.data,this.product.finish_labels=new Array(this.product.groups.length).fill(" ??"),this.product.finish_prices=new Array(this.product.groups.length).fill(0),this.breadcrumbData.companyCode=this.product?.company_code,this.breadcrumbData.catalogueCode=this.product.catalogue_code;let e=[{name:this.product?.company_code,router:`/catalogue/${this.product?.catalogue_id}`},{name:this.product?.category_name,router:`/catalogue/${this.product?.catalogue_id}/category/${this.product?.category_id}`},{name:this.product?.sub_category_name,router:`/catalogue/${this.product?.catalogue_id}/sub-category/${this.product?.sub_category_id}`},{name:this.product?.label,router:null}];this.breadcrumbData.breadcrumbs=e,this.price=this.product?.price}})}getProductSectionTextFile(){this._mainService.getProductFile(this.product.company_code,this.product.catalogue_code,this.product.category_label,this.product.sub_category_label).subscribe({next:i=>{this.product.description=i}})}stepDown(){this.qty.value!=1&&(this.qty.setValue(parseInt(this.qty.value)-1),this.changePrice())}stepUp(){this.qty.setValue(parseInt(this.qty.value)+1),this.changePrice()}changePrice(){this.price=this.product.price;for(let i=0;i<this.product.finish_prices.length;i++)this.price=this.price+this.product.finish_prices[i];this.price=this.price*this.qty.value,this.price=parseFloat(this.price).toFixed(2)}selectCadFiles(){var i=this.autoCadForm.value;let t=[];i.dwg_2d==!0&&t.push(`${this.media_url}${this.product?.company_code}/${this.product?.catalogue_code.toLowerCase()}/dwgfolders/dwg/2d/${this.product?.label.toLowerCase()}_2d.dwg`),i.dwg_3d==!0&&t.push(`${this.media_url}${this.product?.company_code}/${this.product?.catalogue_code.toLowerCase()}/dwgfolders/dwg/3d/${this.product?.label.toLowerCase()}_3d.dwg`),i.dxf_2d==!0&&t.push(`${this.media_url}${this.product?.company_code}/${this.product?.catalogue_code.toLowerCase()}/dwgfolders/dxf/2d/${this.product?.label.toLowerCase()}_2d.dxf`),i.dxf_3d==!0&&t.push(`${this.media_url}${this.product?.company_code}/${this.product?.catalogue_code.toLowerCase()}/dwgfolders/dxf/3d/${this.product?.label.toLowerCase()}_3d.dxf`),i.rvt_2d==!0&&t.push(`${this.media_url}${this.product?.company_code}/${this.product?.catalogue_code.toLowerCase()}/dwgfolders/rvt/2d/${this.product?.label.toLowerCase()}_2d.rvt`),i.rvt_3d==!0&&t.push(`${this.media_url}${this.product?.company_code}/${this.product?.catalogue_code.toLowerCase()}/dwgfolders/rvt/3d/${this.product?.label.toLowerCase()}_3d.rvt`);let e=setInterval(function(c){let p=c.pop(),m=document.createElement("a");p=p||"",m.setAttribute("href",p),m.click(),c.length==0&&clearInterval(e)},1e3,t)}downloadPdf(i){console.log(this.product);let t=document.createElement("a"),e=`${this.media_url}${this.product?.company_code}/${this.product?.catalogue_code.toLowerCase()}/labels/${this.product?.category_label}/${i}/${this.product?.sub_category_label}.pdf`;t.setAttribute("href",e),t.setAttribute("target","_blank"),t.click()}finishCollapseToggle(i){this.product?.groups.forEach((t,e)=>{e==i?t.collapse=!t.collapse:t.collapse=!0})}finish(i,t,e){this.product.finish_labels[t]=i,this.product.finish_prices[t]=e,this.price=+this.price+ +this.product.finish_prices[t]}addToCart(){let i=this.product.finish_labels.toString();i=i.replace(/,/g,"");let t={product_id:this.product.id,tag_name:"",order_code:this.product.label+i,finish_labels:this.product.finish_labels,finish_prices:this.product.finish_prices,qty:this.qty.value};this._cartService.add(t).subscribe({next:e=>{this.success(e.message),this._busService.sendShowCart()}})}ngOnInit(){this._activatedRoute.params.subscribe({next:i=>{let t=i.product_id;this.getProduct(t)}})}static \u0275fac=(()=>{let i;return function(e){return(i||(i=T(r)))(e||r)}})();static \u0275cmp=V({type:r,selectors:[["app-product"]],features:[M([]),D],decls:121,vars:31,consts:[["pdfSelect",""],["myFragment",""],["finishCollapse","ngbCollapse"],["subfinishCollapse","ngbCollapse"],[3,"data"],[1,"container-fluid"],[1,"row","mt-3"],[1,"col-12"],[1,"d-flex","flex-md-row","flex-column","justify-content-between","align-items-center"],[1,"flex-fill"],[1,"text-muted"],[1,"ms-2","text-dark"],[1,"d-flex","flex-md-row","flex-column","align-items-center"],[1,"form-select","form-select-sm","decorated",3,"change"],["value",""],["class","text-dark ms-2",3,"ngValue","value",4,"ngFor","ngForOf"],[1,"border-dark"],[1,"col-md-6","col-12"],[1,"img-hover-zoom"],["alt","","width","200",1,"img-rounded",3,"src"],["class","menu mb-2",4,"ngFor","ngForOf"],[1,"prod-description"],[1,"p-1",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center"],[1,""],[1,"ms-5","qtyInput"],[1,"input-group","bg-main","mb-3"],[1,"input-group-text"],["type","button",1,"btn","bg-light-purple","border",3,"click"],["min","1","value","1","type","number",1,"form-control","form-control-sm",3,"change","formControl"],["type","button",1,"btn","btn-dark","btn-sm","btn2","w-100",3,"click"],[1,"mt-3"],[1,"row"],["class","col-6 col-lg-4 mb-3 text-center img-hover-zoom",4,"ngFor","ngForOf"],[3,"formGroup"],[1,"table"],[1,"pt-3"],[1,"form-check","form-switch"],["formControlName","dwg_2d","type","checkbox","role","switch","id","flexSwitchCheckDefault",1,"form-check-input"],["formControlName","dxf_2d","type","checkbox","role","switch","id","flexSwitchCheckDefault",1,"form-check-input"],["formControlName","rvt_2d","type","checkbox","role","switch","id","flexSwitchCheckDefault",1,"form-check-input"],["formControlName","dwg_3d","type","checkbox","role","switch","id","flexSwitchCheckDefault",1,"form-check-input"],["formControlName","dxf_3d","type","checkbox","role","switch","id","flexSwitchCheckDefault",1,"form-check-input"],["formControlName","rvt_3d","type","checkbox","role","switch","id","flexSwitchCheckDefault",1,"form-check-input"],[1,"btn","btn-sm","btn2","w-100",3,"click"],[1,"text-dark","ms-2",3,"ngValue","value"],[1,"menu","mb-2"],["href","javascript:;",1,"text-decoration-none","fw-bold",3,"click","ngClass"],[4,"ngIf"],[3,"ngbCollapse"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"col-6","col-lg-4","mb-3","text-center","img-hover-zoom"],[1,"clr-purple","text-decoration-none","font-weight-bold",3,"routerLink"],["alt","","width","100",1,"img-rounded",3,"src"],[1,"mt-2"],["href","javascript:;","class","side-child-item p-1 text-decoration-none",3,"ngClass","click",4,"ngIf"],["href","javascript:;",1,"text-decoration-none","fw-bold",3,"click"],["href","javascript:;",1,"side-child-item","p-1","text-decoration-none",3,"click","ngClass"]],template:function(t,e){if(t&1){let c=w();s(0,"app-breadcrumb",4),n(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"span")(7,"small",10),a(8,"Product Description:"),o(),n(9,"span",11),a(10),x(11,"uppercase"),o()()(),n(12,"div",9)(13,"div",12)(14,"select",13,0),g("change",function(){_(c);let m=$(15);return h(e.downloadPdf(m.value))}),n(16,"option",14),a(17,"Product info"),o(),f(18,we,2,3,"option",15),o()()()()(),s(19,"hr",16),n(20,"div",17)(21,"div")(22,"small",10),a(23,"Product:"),o(),n(24,"h6"),a(25),o(),s(26,"hr",16),n(27,"div",18),s(28,"img",19),x(29,"lowercase"),x(30,"lowercase"),o()(),n(31,"div"),s(32,"hr",16),n(33,"h6"),a(34,"Finishes"),o(),f(35,ke,8,9,"div",20),o()(),n(36,"div",17)(37,"div"),s(38,"br"),n(39,"h6"),a(40,"Description"),o(),s(41,"hr",16),n(42,"p"),a(43),o(),n(44,"p",21),a(45),o()(),n(46,"div"),s(47,"hr",16),n(48,"h6"),a(49,"Product Code"),o(),n(50,"h3",22),a(51),f(52,Pe,2,1,"span",23),o(),n(53,"div",24)(54,"div",25)(55,"h6",25),a(56),x(57,"currency"),o()(),n(58,"div",26)(59,"div",27)(60,"span",28),a(61,"Qty"),o(),n(62,"button",29),g("click",function(){return _(c),h(e.stepDown())}),a(63,"-"),o(),n(64,"input",30),g("change",function(){return _(c),h(e.changePrice())}),o(),n(65,"button",29),g("click",function(){return _(c),h(e.stepUp())}),a(66,"+"),o()()()(),n(67,"button",31),g("click",function(){return _(c),h(e.addToCart())}),a(68," Add to Cart "),o()()(),n(69,"div",17)(70,"div"),s(71,"hr",16),n(72,"h6",32),a(73),o(),n(74,"div",33),f(75,Fe,7,13,"div",34),o()()(),n(76,"div",17)(77,"div",32),s(78,"hr",16),n(79,"h6"),a(80,"Download"),o(),n(81,"form",35)(82,"table",36)(83,"thead")(84,"tr"),s(85,"th"),n(86,"th"),a(87,"DWG"),o(),n(88,"th"),a(89,"DXF"),o(),n(90,"th"),a(91,"Revit"),o()()(),n(92,"tbody")(93,"tr")(94,"td",37),a(95,"2D"),o(),n(96,"td")(97,"div",38),s(98,"input",39),o()(),n(99,"td")(100,"div",38),s(101,"input",40),o()(),n(102,"td")(103,"div",38),s(104,"input",41),o()()(),n(105,"tr")(106,"td",37),a(107,"3D"),o(),n(108,"td")(109,"div",38),s(110,"input",42),o()(),n(111,"td")(112,"div",38),s(113,"input",43),o()(),n(114,"td")(115,"div",38),s(116,"input",44),o()()()()(),n(117,"button",45),g("click",function(){return _(c),h(e.selectCadFiles())}),a(118," Download "),o()()()()()(),f(119,De,2,2,"ng-template",null,1,z)}t&2&&(d("data",e.breadcrumbData),l(10),C(y(11,20,e.product==null?null:e.product.name)),l(8),d("ngForOf",e.pdfs),l(7),C(e.product==null?null:e.product.label),l(3),I("src","",e.media_url,"",e.product==null?null:e.product.company_code,"/",y(29,22,e.product==null?null:e.product.catalogue_code),"/prod_icons/",y(30,24,e.product==null?null:e.product.label),"_3d.png",k),l(7),d("ngForOf",e.product==null?null:e.product.groups),l(8),C(e.product==null?null:e.product.sub_category_name),l(2),C(e.product==null?null:e.product.description),l(5),d("ngClass",S(28,be,e.product==null?null:e.product.finish_labels.includes(" ??"),!(e.product!=null&&e.product.finish_labels.includes(" ??")))),l(),b(" ",e.product==null?null:e.product.label," "),l(),d("ngForOf",e.product==null?null:e.product.finish_labels),l(4),C(y(57,26,e.price)),l(8),d("formControl",e.qty),l(9),b("Other ",e.product==null?null:e.product.sub_category_name," sizes"),l(2),d("ngForOf",e.product==null?null:e.product.products),l(6),d("formGroup",e.autoCadForm))},dependencies:[X,G,j,R,U,Q,H,W,K,J,he,se,ne,ce,de,Z,oe,Y,ee,te,pe,re,le,ae,me,ue],styles:[".prod-description[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,Helvetica,Arial,sans-serif}.qtyInput[_ngcontent-%COMP%]{width:160px}.last-col[_ngcontent-%COMP%]{width:28%!important}"]})};export{fe as ProductComponent};
