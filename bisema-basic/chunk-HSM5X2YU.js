import{$ as Xe,$a as Je,A as zt,Aa as g,Ba as Qt,Ca as Zt,E as Xt,F as P,G as L,J as me,Ja as Ve,K as mt,Ka as en,L as ze,La as ye,Ma as _e,Oa as Et,Pa as tn,W as bt,Wa as Nt,X as m,Xa as ue,Y as yt,Ya as nn,_a as rn,aa as x,ba as _t,ca as F,da as Yt,ea as Ie,ha as D,lb as on,ma as u,mb as ne,na as Me,nb as Pe,oa as be,pa as Jt,qa as R,ra as j,rb as sn,sa as V,ta as le,ua as ce,va as Re,wa as Ye,x as Ke,y as Kt,za as te}from"./chunk-RPBBG52S.js";import{a as gt}from"./chunk-4CLCTAJ7.js";var Ct=function(t,n){return Ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},Ct(t,n)};function mn(t,n){Ct(t,n);function e(){this.constructor=t}t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}var S=function(){return S=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},S.apply(this,arguments)};function bn(t,n){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var r=e.call(t),i,o=[],s;try{for(;(n===void 0||n-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return o}function wt(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(bn(arguments[n]));return t}var ir="An invariant failed, however the error is obfuscated because this is an production build.",et=[];Object.freeze(et);var Rt={};Object.freeze(Rt);var or={};function At(){return typeof window<"u"?window:typeof global<"u"?global:or}function I(){return++c.mobxGuid}function b(t){throw Fe(!1,t),"X"}function Fe(t,n){if(!t)throw new Error("[mobx] "+(n||ir))}var an=[];function X(t,n){return!1}function Vt(t){var n=!1;return function(){if(!n)return n=!0,t.apply(this,arguments)}}var ln=function(){};function sr(t){var n=[];return t.forEach(function(e){n.indexOf(e)===-1&&n.push(e)}),n}function Pt(t){return t!==null&&typeof t=="object"}function xe(t){if(t===null||typeof t!="object")return!1;var n=Object.getPrototypeOf(t);return n===Object.prototype||n===null}function ar(t){return De(t)||ge(t)?t:Array.isArray(t)?new Map(t):xe(t)?new Map(Object.entries(t)):b("Cannot convert to map from '"+t+"'")}function lr(t,n){for(var e=0;e<n.length;e++)he(t,n[e],t[n[e]])}function he(t,n,e){Object.defineProperty(t,n,{enumerable:!1,writable:!0,configurable:!0,value:e})}function He(t,n,e){Object.defineProperty(t,n,{enumerable:!1,writable:!1,configurable:!0,value:e})}function se(t,n){var e="isMobX"+t;return n.prototype[e]=!0,function(r){return Pt(r)&&r[e]===!0}}function cr(t,n){return typeof t=="number"&&typeof n=="number"&&isNaN(t)&&isNaN(n)}function De(t){return At().Map!==void 0&&t instanceof At().Map}function Ge(t){return t instanceof Set}function Ne(t){for(var n=[];;){var e=t.next();if(e.done)break;n.push(e.value)}return n}function yn(){return typeof Symbol=="function"&&Symbol.toPrimitive||"@@toPrimitive"}function _n(t){return t===null?null:typeof t=="object"?""+t:t}function Lt(){return typeof Symbol=="function"&&Symbol.iterator||"@@iterator"}function Ft(t,n){He(t,Lt(),n)}function je(t){return t[Lt()]=ur,t}function jt(){return typeof Symbol=="function"&&Symbol.toStringTag||"@@toStringTag"}function ur(){return this}var st=function(){function t(n){n===void 0&&(n="Atom@"+I()),this.name=n,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=v.NOT_TRACKING}return t.prototype.onBecomeUnobserved=function(){},t.prototype.onBecomeObserved=function(){},t.prototype.reportObserved=function(){return Vn(this)},t.prototype.reportChanged=function(){Y(),Rr(this),J()},t.prototype.toString=function(){return this.name},t}(),Bt=se("Atom",st);function dr(t,n,e){n===void 0&&(n=ln),e===void 0&&(e=ln);var r=new st(t);return Wr(r,n),Bn(r,e),r}function En(t,n){return t===n}function pr(t,n){return $t(t,n)}function fr(t,n){return $t(t,n,1)}function hr(t,n){return cr(t,n)||En(t,n)}var Oe={identity:En,structural:pr,default:hr,shallow:fr},vr={},gr={};function mr(t,n){var e=n?vr:gr;return e[t]||(e[t]={configurable:!0,enumerable:n,get:function(){return pe(this),this[t]},set:function(r){pe(this),this[t]=r}})}function pe(t){if(t.__mobxDidRunLazyInitializers!==!0){var n=t.__mobxDecorators;if(n){he(t,"__mobxDidRunLazyInitializers",!0);for(var e in n){var r=n[e];r.propertyCreator(t,r.prop,r.descriptor,r.decoratorTarget,r.decoratorArguments)}}}}function Nn(t,n){return function(){var r,i=function(s,a,l,N){if(N===!0)return n(s,a,l,s,r),null;if(!Object.prototype.hasOwnProperty.call(s,"__mobxDecorators")){var y=s.__mobxDecorators;he(s,"__mobxDecorators",S({},y))}return s.__mobxDecorators[a]={prop:a,propertyCreator:n,descriptor:l,decoratorTarget:s,decoratorArguments:r},mr(a,t)};return br(arguments)?(r=et,i.apply(null,arguments)):(r=Array.prototype.slice.call(arguments),i)}}function br(t){return(t.length===2||t.length===3)&&typeof t[1]=="string"||t.length===4&&t[3]===!0}function $e(t,n,e){return Gn(t)?t:Array.isArray(t)?p.array(t,{name:e}):xe(t)?p.object(t,void 0,{name:e}):De(t)?p.map(t,{name:e}):Ge(t)?p.set(t,{name:e}):t}function yr(t,n,e){return t==null||ke(t)||ut(t)||ge(t)||we(t)?t:Array.isArray(t)?p.array(t,{name:e,deep:!1}):xe(t)?p.object(t,void 0,{name:e,deep:!1}):De(t)?p.map(t,{name:e,deep:!1}):Ge(t)?p.set(t,{name:e,deep:!1}):b(!1)}function Be(t){return t}function _r(t,n,e){return $t(t,n)?n:t}function at(t){var n=Nn(!0,function(r,i,o,s,a){var l=o?o.initializer?o.initializer.call(r):o.value:void 0;oi(r,i,l,t)}),e=(typeof process<"u"&&process.env,n);return e.enhancer=t,e}var On={deep:!0,name:void 0,defaultDecorator:void 0},Er={deep:!1,name:void 0,defaultDecorator:void 0};Object.freeze(On);Object.freeze(Er);function Ee(t){return t==null?On:typeof t=="string"?{name:t,deep:!0}:t}function Qe(t){return t.defaultDecorator?t.defaultDecorator.enhancer:t.deep===!1?Be:$e}var kt=at($e),Nr=at(yr),xn=at(Be),Or=at(_r);function xr(t,n,e){if(typeof arguments[1]=="string")return kt.apply(null,arguments);if(Gn(t))return t;var r=xe(t)?p.object(t,n,e):Array.isArray(t)?p.array(t,n):De(t)?p.map(t,n):Ge(t)?p.set(t,n):t;if(r!==t)return r;b(!1)}var cn={box:function(t,n){arguments.length>2&&K("box");var e=Ee(n);return new ie(t,Qe(e),e.name,!0,e.equals)},shallowBox:function(t,n){return arguments.length>2&&K("shallowBox"),X("observable.shallowBox","observable.box(value, { deep: false })"),p.box(t,{name:n,deep:!1})},array:function(t,n){arguments.length>2&&K("array");var e=Ee(n);return new Z(t,Qe(e),e.name)},shallowArray:function(t,n){return arguments.length>2&&K("shallowArray"),X("observable.shallowArray","observable.array(values, { deep: false })"),p.array(t,{name:n,deep:!1})},map:function(t,n){arguments.length>2&&K("map");var e=Ee(n);return new dt(t,Qe(e),e.name)},shallowMap:function(t,n){return arguments.length>2&&K("shallowMap"),X("observable.shallowMap","observable.map(values, { deep: false })"),p.map(t,{name:n,deep:!1})},set:function(t,n){arguments.length>2&&K("set");var e=Ee(n);return new pt(t,Qe(e),e.name)},object:function(t,n,e){typeof arguments[1]=="string"&&K("object");var r=Ee(e);return qr({},t,n,r)},shallowObject:function(t,n){return typeof arguments[1]=="string"&&K("shallowObject"),X("observable.shallowObject","observable.object(values, {}, { deep: false })"),p.object(t,{},{name:n,deep:!1})},ref:xn,shallow:Nr,deep:kt,struct:Or},p=xr;Object.keys(cn).forEach(function(t){return p[t]=cn[t]});function K(t){b("Expected one or two arguments to observable."+t+". Did you accidentally try to use observable."+t+" as decorator?")}var tt=Nn(!1,function(t,n,e,r,i){var o=e.get,s=e.set,a=i[0]||{};si(t,n,S({get:o,set:s},a))}),Dr=tt({equals:Oe.structural}),_=function(n,e,r){if(typeof e=="string"||n!==null&&typeof n=="object"&&arguments.length===1)return tt.apply(null,arguments);var i=typeof e=="object"?e:{};return i.get=n,i.set=typeof e=="function"?e:i.set,i.name=i.name||n.name||"",new oe(i)};_.struct=Dr;var v=function(t){return t[t.NOT_TRACKING=-1]="NOT_TRACKING",t[t.UP_TO_DATE=0]="UP_TO_DATE",t[t.POSSIBLY_STALE=1]="POSSIBLY_STALE",t[t.STALE=2]="STALE",t}(v||{}),U=function(t){return t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK",t}(U||{}),nt=function(){function t(n){this.cause=n}return t}();function Le(t){return t instanceof nt}function Tt(t){switch(t.dependenciesState){case v.UP_TO_DATE:return!1;case v.NOT_TRACKING:case v.STALE:return!0;case v.POSSIBLY_STALE:{for(var n=Ce(),e=t.observing,r=e.length,i=0;i<r;i++){var o=e[i];if(ct(o)){if(c.disableErrorBoundaries)o.get();else try{o.get()}catch{return re(n),!0}if(t.dependenciesState===v.STALE)return re(n),!0}}return Tn(t),re(n),!1}}}function lt(t){var n=t.observers.length>0;c.computationDepth>0&&n&&b(!1),!c.allowStateChanges&&(n||c.enforceActions==="strict")&&b(!1)}function Dn(t,n,e){var r=wn(!0);Tn(t),t.newObserving=new Array(t.observing.length+100),t.unboundDepsCount=0,t.runId=++c.runId;var i=c.trackingDerivation;c.trackingDerivation=t;var o;if(c.disableErrorBoundaries===!0)o=n.call(e);else try{o=n.call(e)}catch(s){o=new nt(s)}return c.trackingDerivation=i,Cr(t),t.observing.length===0&&void 0,An(r),o}function Cr(t){for(var n=t.observing,e=t.observing=t.newObserving,r=v.UP_TO_DATE,i=0,o=t.unboundDepsCount,s=0;s<o;s++){var a=e[s];a.diffValue===0&&(a.diffValue=1,i!==s&&(e[i]=a),i++),a.dependenciesState>r&&(r=a.dependenciesState)}for(e.length=i,t.newObserving=null,o=n.length;o--;){var a=n[o];a.diffValue===0&&Mn(a,t),a.diffValue=0}for(;i--;){var a=e[i];a.diffValue===1&&(a.diffValue=0,Mr(a,t))}r!==v.UP_TO_DATE&&(t.dependenciesState=r,t.onBecomeStale())}function St(t){var n=t.observing;t.observing=[];for(var e=n.length;e--;)Mn(n[e],t);t.dependenciesState=v.NOT_TRACKING}function Cn(t){var n=Ce(),e=t();return re(n),e}function Ce(){var t=c.trackingDerivation;return c.trackingDerivation=null,t}function re(t){c.trackingDerivation=t}function wn(t){var n=c.allowStateReads;return c.allowStateReads=t,n}function An(t){c.allowStateReads=t}function Tn(t){if(t.dependenciesState!==v.UP_TO_DATE){t.dependenciesState=v.UP_TO_DATE;for(var n=t.observing,e=n.length;e--;)n[e].lowestObserverState=v.UP_TO_DATE}}var rt=0,wr=1;function de(t,n){var e=function(){return Ar(t,n,this,arguments)};return e.isMobxAction=!0,e}function Ar(t,n,e,r){var i=Tr(t,e,r);try{return n.apply(e,r)}catch(o){throw i.error=o,o}finally{Sr(i)}}function Tr(t,n,e){var r=w()&&!!t,i=0;if(r){i=Date.now();var o=e&&e.length||0,s=new Array(o);if(o>0)for(var a=0;a<o;a++)s[a]=e[a];B({type:"action",name:t,object:n,arguments:s})}var l=Ce();Y();var N=Sn(!0),y=wn(!0),M={prevDerivation:l,prevAllowStateChanges:N,prevAllowStateReads:y,notifySpy:r,startTime:i,actionId:wr++,parentActionId:rt};return rt=M.actionId,M}function Sr(t){rt!==t.actionId&&b("invalid action stack. did you forget to finish an action?"),rt=t.parentActionId,t.error!==void 0&&(c.suppressReactionErrors=!0),In(t.prevAllowStateChanges),An(t.prevAllowStateReads),J(),re(t.prevDerivation),t.notifySpy&&k({time:Date.now()-t.startTime}),c.suppressReactionErrors=!1}function Sn(t){var n=c.allowStateChanges;return c.allowStateChanges=t,n}function In(t){c.allowStateChanges=t}var ie=function(t){mn(n,t);function n(e,r,i,o,s){i===void 0&&(i="ObservableValue@"+I()),o===void 0&&(o=!0),s===void 0&&(s=Oe.default);var a=t.call(this,i)||this;return a.enhancer=r,a.name=i,a.equals=s,a.hasUnreportedChange=!1,a.value=r(e,void 0,i),o&&w()&&fe({type:"create",name:a.name,newValue:""+a.value}),a}return n.prototype.dehanceValue=function(e){return this.dehancer!==void 0?this.dehancer(e):e},n.prototype.set=function(e){var r=this.value;if(e=this.prepareNewValue(e),e!==c.UNCHANGED){var i=w();i&&B({type:"update",name:this.name,newValue:e,oldValue:r}),this.setNewValue(e),i&&k()}},n.prototype.prepareNewValue=function(e){if(lt(this),W(this)){var r=q(this,{object:this,type:"update",newValue:e});if(!r)return c.UNCHANGED;e=r.newValue}return e=this.enhancer(e,this.value,this.name),this.equals(this.value,e)?c.UNCHANGED:e},n.prototype.setNewValue=function(e){var r=this.value;this.value=e,this.reportChanged(),H(this)&&G(this,{type:"update",object:this,newValue:e,oldValue:r})},n.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},n.prototype.intercept=function(e){return We(this,e)},n.prototype.observe=function(e,r){return r&&e({object:this,type:"update",newValue:this.value,oldValue:void 0}),qe(this,e)},n.prototype.toJSON=function(){return this.get()},n.prototype.toString=function(){return this.name+"["+this.value+"]"},n.prototype.valueOf=function(){return _n(this.get())},n}(st);ie.prototype[yn()]=ie.prototype.valueOf;var oo=se("ObservableValue",ie),oe=function(){function t(n){this.dependenciesState=v.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=v.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+I(),this.value=new nt(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=U.NONE,this.derivation=n.get,this.name=n.name||"ComputedValue@"+I(),n.set&&(this.setter=de(this.name+"-setter",n.set)),this.equals=n.equals||(n.compareStructural||n.struct?Oe.structural:Oe.default),this.scope=n.context,this.requiresReaction=!!n.requiresReaction,this.keepAlive=!!n.keepAlive}return t.prototype.onBecomeStale=function(){Pr(this)},t.prototype.onBecomeUnobserved=function(){},t.prototype.onBecomeObserved=function(){},t.prototype.get=function(){this.isComputing&&b("Cycle detected in computation "+this.name+": "+this.derivation),c.inBatch===0&&this.observers.length===0&&!this.keepAlive?Tt(this)&&(this.warnAboutUntrackedRead(),Y(),this.value=this.computeValue(!1),J()):(Vn(this),Tt(this)&&this.trackAndCompute()&&Vr(this));var n=this.value;if(Le(n))throw n.cause;return n},t.prototype.peek=function(){var n=this.computeValue(!1);if(Le(n))throw n.cause;return n},t.prototype.set=function(n){if(this.setter){Fe(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,n)}finally{this.isRunningSetter=!1}}else Fe(!1,!1)},t.prototype.trackAndCompute=function(){w()&&fe({object:this.scope,type:"compute",name:this.name});var n=this.value,e=this.dependenciesState===v.NOT_TRACKING,r=this.computeValue(!0),i=e||Le(n)||Le(r)||!this.equals(n,r);return i&&(this.value=r),i},t.prototype.computeValue=function(n){this.isComputing=!0,c.computationDepth++;var e;if(n)e=Dn(this,this.derivation,this.scope);else if(c.disableErrorBoundaries===!0)e=this.derivation.call(this.scope);else try{e=this.derivation.call(this.scope)}catch(r){e=new nt(r)}return c.computationDepth--,this.isComputing=!1,e},t.prototype.suspend=function(){this.keepAlive||(St(this),this.value=void 0)},t.prototype.observe=function(n,e){var r=this,i=!0,o=void 0;return Ue(function(){var s=r.get();if(!i||e){var a=Ce();n({type:"update",object:r,newValue:s,oldValue:o}),re(a)}i=!1,o=s})},t.prototype.warnAboutUntrackedRead=function(){},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},t.prototype.valueOf=function(){return _n(this.get())},t}();oe.prototype[yn()]=oe.prototype.valueOf;var ct=se("ComputedValue",oe);var Ot=function(){function t(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1}return t}(),xt=!0,Ir=!1,c=function(){var t=At();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(xt=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==new Ot().version&&(xt=!1),xt?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new Ot):(setTimeout(function(){Ir||b("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new Ot)}();function Mr(t,n){var e=t.observers.length;e&&(t.observersIndexes[n.__mapid]=e),t.observers[e]=n,t.lowestObserverState>n.dependenciesState&&(t.lowestObserverState=n.dependenciesState)}function Mn(t,n){if(t.observers.length===1)t.observers.length=0,Rn(t);else{var e=t.observers,r=t.observersIndexes,i=e.pop();if(i!==n){var o=r[n.__mapid]||0;o?r[i.__mapid]=o:delete r[i.__mapid],e[o]=i}delete r[n.__mapid]}}function Rn(t){t.isPendingUnobservation===!1&&(t.isPendingUnobservation=!0,c.pendingUnobservations.push(t))}function Y(){c.inBatch++}function J(){if(--c.inBatch===0){Fn();for(var t=c.pendingUnobservations,n=0;n<t.length;n++){var e=t[n];e.isPendingUnobservation=!1,e.observers.length===0&&(e.isBeingObserved&&(e.isBeingObserved=!1,e.onBecomeUnobserved()),e instanceof oe&&e.suspend())}c.pendingUnobservations=[]}}function Vn(t){var n=c.trackingDerivation;return n!==null?(n.runId!==t.lastAccessedBy&&(t.lastAccessedBy=n.runId,n.newObserving[n.unboundDepsCount++]=t,t.isBeingObserved||(t.isBeingObserved=!0,t.onBecomeObserved())),!0):(t.observers.length===0&&c.inBatch>0&&Rn(t),!1)}function Rr(t){if(t.lowestObserverState!==v.STALE){t.lowestObserverState=v.STALE;for(var n=t.observers,e=n.length;e--;){var r=n[e];r.dependenciesState===v.UP_TO_DATE&&(r.isTracing!==U.NONE&&Pn(r,t),r.onBecomeStale()),r.dependenciesState=v.STALE}}}function Vr(t){if(t.lowestObserverState!==v.STALE){t.lowestObserverState=v.STALE;for(var n=t.observers,e=n.length;e--;){var r=n[e];r.dependenciesState===v.POSSIBLY_STALE?r.dependenciesState=v.STALE:r.dependenciesState===v.UP_TO_DATE&&(t.lowestObserverState=v.UP_TO_DATE)}}}function Pr(t){if(t.lowestObserverState===v.UP_TO_DATE){t.lowestObserverState=v.POSSIBLY_STALE;for(var n=t.observers,e=n.length;e--;){var r=n[e];r.dependenciesState===v.UP_TO_DATE&&(r.dependenciesState=v.POSSIBLY_STALE,r.isTracing!==U.NONE&&Pn(r,t),r.onBecomeStale())}}}function Pn(t,n){if(console.log("[mobx.trace] '"+t.name+"' is invalidated due to a change in: '"+n.name+"'"),t.isTracing===U.BREAK){var e=[];Ln(Kr(t),e,1),new Function(`debugger;
/*
Tracing '`+t.name+`'

You are entering this break point because derivation '`+t.name+"' is being traced and '"+n.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(t instanceof oe?t.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+e.join(`
`)+`
*/
    `)()}}function Ln(t,n,e){if(n.length>=1e3){n.push("(and many more)");return}n.push(""+new Array(e).join("	")+t.name),t.dependencies&&t.dependencies.forEach(function(r){return Ln(r,n,e+1)})}var it=function(){function t(n,e,r,i){n===void 0&&(n="Reaction@"+I()),i===void 0&&(i=!1),this.name=n,this.onInvalidate=e,this.errorHandler=r,this.requiresObservable=i,this.observing=[],this.newObserving=[],this.dependenciesState=v.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+I(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=U.NONE}return t.prototype.onBecomeStale=function(){this.schedule()},t.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,c.pendingReactions.push(this),Fn())},t.prototype.isScheduled=function(){return this._isScheduled},t.prototype.runReaction=function(){if(!this.isDisposed){if(Y(),this._isScheduled=!1,Tt(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&w()&&fe({name:this.name,type:"scheduled-reaction"})}catch(n){this.reportExceptionInDerivation(n)}}J()}},t.prototype.track=function(n){Y();var e=w(),r;e&&(r=Date.now(),B({name:this.name,type:"reaction"})),this._isRunning=!0;var i=Dn(this,n,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&St(this),Le(i)&&this.reportExceptionInDerivation(i.cause),e&&k({time:Date.now()-r}),J()},t.prototype.reportExceptionInDerivation=function(n){var e=this;if(this.errorHandler){this.errorHandler(n,this);return}if(c.disableErrorBoundaries)throw n;var r="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";c.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(r,n),w()&&fe({type:"error",name:this.name,message:r,error:""+n}),c.globalReactionErrorHandlers.forEach(function(i){return i(n,e)})},t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Y(),St(this),J()))},t.prototype.getDisposer=function(){var n=this.dispose.bind(this);return n.$mobx=this,n},t.prototype.toString=function(){return"Reaction["+this.name+"]"},t.prototype.trace=function(n){n===void 0&&(n=!1),Xr(this,n)},t}();var un=100,Lr=function(t){return t()};function Fn(){c.inBatch>0||c.isRunningReactions||Lr(Fr)}function Fr(){c.isRunningReactions=!0;for(var t=c.pendingReactions,n=0;t.length>0;){++n===un&&(console.error("Reaction doesn't converge to a stable state after "+un+" iterations."+(" Probably there is a cycle in the reactive function: "+t[0])),t.splice(0));for(var e=t.splice(0),r=0,i=e.length;r<i;r++)e[r].runReaction()}c.isRunningReactions=!1}var ot=se("Reaction",it);function w(){return!!c.spyListeners.length}function fe(t){if(c.spyListeners.length)for(var n=c.spyListeners,e=0,r=n.length;e<r;e++)n[e](t)}function B(t){var n=S({},t,{spyReportStart:!0});fe(n)}var jr={spyReportEnd:!0};function k(t){fe(t?S({},t,{spyReportEnd:!0}):jr)}function Br(t){return c.spyListeners.push(t),Vt(function(){c.spyListeners=c.spyListeners.filter(function(n){return n!==t})})}function kr(){b(!1)}function dn(t){return function(n,e,r){if(r){if(r.value)return{value:de(t,r.value),enumerable:!1,configurable:!0,writable:!0};var i=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return de(t,i.call(this))}}}return Hr(t).apply(this,arguments)}}function Hr(t){return function(n,e,r){Object.defineProperty(n,e,{configurable:!0,enumerable:!1,get:function(){},set:function(i){he(this,e,f(t,i))}})}}function Gr(t,n,e,r){return r===!0?(Dt(t,n,e.value),null):e?{configurable:!0,enumerable:!1,get:function(){return Dt(this,n,e.value||e.initializer.call(this)),this[n]},set:kr}:{enumerable:!1,configurable:!0,set:function(i){Dt(this,n,i)},get:function(){}}}var f=function(n,e,r,i){if(arguments.length===1&&typeof n=="function")return de(n.name||"<unnamed action>",n);if(arguments.length===2&&typeof e=="function")return de(n,e);if(arguments.length===1&&typeof n=="string")return dn(n);if(i===!0)n[e]=de(n.name||e,r.value);else return dn(e).apply(null,arguments)};f.bound=Gr;function Dt(t,n,e){he(t,n,de(n,e.bind(t)))}function Ue(t,n){n===void 0&&(n=Rt);var e=n&&n.name||t.name||"Autorun@"+I(),r=!n.scheduler&&!n.delay,i;if(r)i=new it(e,function(){this.track(a)},n.onError,n.requiresObservable);else{var o=jn(n),s=!1;i=new it(e,function(){s||(s=!0,o(function(){s=!1,i.isDisposed||i.track(a)}))},n.onError,n.requiresObservable)}function a(){t(i)}return i.schedule(),i.getDisposer()}var $r=function(t){return t()};function jn(t){return t.scheduler?t.scheduler:t.delay?function(n){return setTimeout(n,t.delay)}:$r}function ve(t,n,e){e===void 0&&(e=Rt),typeof e=="boolean"&&(e={fireImmediately:e},X("Using fireImmediately as argument is deprecated. Use '{ fireImmediately: true }' instead"));var r=e.name||"Reaction@"+I(),i=f(r,e.onError?Ur(e.onError,n):n),o=!e.scheduler&&!e.delay,s=jn(e),a=!0,l=!1,N,y=e.compareStructural?Oe.structural:e.equals||Oe.default,M=new it(r,function(){a||o?ae():l||(l=!0,s(ae))},e.onError,e.requiresObservable);function ae(){if(l=!1,!M.isDisposed){var Wt=!1;M.track(function(){var qt=t(M);Wt=a||!y(N,qt),N=qt}),a&&e.fireImmediately&&i(N,M),!a&&Wt===!0&&i(N,M),a&&(a=!1)}}return M.schedule(),M.getDisposer()}function Ur(t,n){return function(){try{return n.apply(this,arguments)}catch(e){t.call(this,e)}}}function Wr(t,n,e){return kn("onBecomeObserved",t,n,e)}function Bn(t,n,e){return kn("onBecomeUnobserved",t,n,e)}function kn(t,n,e,r){var i=typeof r=="function"?Q(n,e):Q(n),o=typeof r=="function"?r:e,s=i[t];return typeof s!="function"?b(!1):(i[t]=function(){s.call(this),o.call(this)},function(){i[t]=s})}function qr(t,n,e,r){if(0&&e)for(var i in e);r=Ee(r);var o=r.defaultDecorator||(r.deep===!1?xn:kt);pe(t),Gt(t,r.name,o.enhancer),Y();try{for(var i in n){var s=Object.getOwnPropertyDescriptor(n,i),a=e&&i in e?e[i]:s.get?tt:o,l=a(t,i,s,!0);l&&Object.defineProperty(t,i,l)}}finally{J()}return t}function Kr(t,n){return Hn(Q(t,n))}function Hn(t){var n={name:t.name};return t.observing&&t.observing.length>0&&(n.dependencies=sr(t.observing).map(Hn)),n}function zr(t,n){if(t==null)return!1;if(n!==void 0){if(ke(t)){var e=t.$mobx;return e.values&&!!e.values[n]}return!1}return ke(t)||!!t.$mobx||Bt(t)||ot(t)||ct(t)}function Gn(t){return arguments.length!==1&&b(!1),zr(t)}function Xr(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=!1;typeof t[t.length-1]=="boolean"&&(e=t.pop());var r=Yr(t);if(!r)return b(!1);r.isTracing===U.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled"),r.isTracing=e?U.BREAK:U.LOG}function Yr(t){switch(t.length){case 0:return c.trackingDerivation;case 1:return Q(t[0]);case 2:return Q(t[0],t[1])}}function z(t,n){n===void 0&&(n=void 0),Y();try{return t.apply(n)}finally{J()}}function W(t){return t.interceptors!==void 0&&t.interceptors.length>0}function We(t,n){var e=t.interceptors||(t.interceptors=[]);return e.push(n),Vt(function(){var r=e.indexOf(n);r!==-1&&e.splice(r,1)})}function q(t,n){var e=Ce();try{var r=t.interceptors;if(r)for(var i=0,o=r.length;i<o&&(n=r[i](n),Fe(!n||n.type,"Intercept handlers should return nothing or a change object"),!!n);i++);return n}finally{re(e)}}function H(t){return t.changeListeners!==void 0&&t.changeListeners.length>0}function qe(t,n){var e=t.changeListeners||(t.changeListeners=[]);return e.push(n),Vt(function(){var r=e.indexOf(n);r!==-1&&e.splice(r,1)})}function G(t,n){var e=Ce(),r=t.changeListeners;if(r){r=r.slice();for(var i=0,o=r.length;i<o;i++)r[i](n);re(e)}}var Jr=1e4,Qr=function(){var t=!1,n={};return Object.defineProperty(n,"0",{set:function(){t=!0}}),Object.create(n)[0]=1,t===!1}(),It=0,Ht=function(){function t(){}return t}();function Zr(t,n){typeof Object.setPrototypeOf<"u"?Object.setPrototypeOf(t.prototype,n):typeof t.prototype.__proto__<"u"?t.prototype.__proto__=n:t.prototype=n}Zr(Ht,Array.prototype);Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach(function(t){Object.defineProperty(Ht.prototype,t,{configurable:!0,writable:!0,value:Array.prototype[t]})});var $n=function(){function t(n,e,r,i){this.array=r,this.owned=i,this.values=[],this.lastKnownLength=0,this.atom=new st(n||"ObservableArray@"+I()),this.enhancer=function(o,s){return e(o,s,n+"[..]")}}return t.prototype.dehanceValue=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.prototype.dehanceValues=function(n){return this.dehancer!==void 0&&n.length>0?n.map(this.dehancer):n},t.prototype.intercept=function(n){return We(this,n)},t.prototype.observe=function(n,e){return e===void 0&&(e=!1),e&&n({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),qe(this,n)},t.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},t.prototype.setArrayLength=function(n){if(typeof n!="number"||n<0)throw new Error("[mobx.array] Out of range: "+n);var e=this.values.length;if(n!==e)if(n>e){for(var r=new Array(n-e),i=0;i<n-e;i++)r[i]=void 0;this.spliceWithArray(e,0,r)}else this.spliceWithArray(n,e-n)},t.prototype.updateArrayLength=function(n,e){if(n!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=e,e>0&&n+e+1>It&&Wn(n+e+1)},t.prototype.spliceWithArray=function(n,e,r){var i=this;lt(this.atom);var o=this.values.length;if(n===void 0?n=0:n>o?n=o:n<0&&(n=Math.max(0,o+n)),arguments.length===1?e=o-n:e==null?e=0:e=Math.max(0,Math.min(e,o-n)),r===void 0&&(r=et),W(this)){var s=q(this,{object:this.array,type:"splice",index:n,removedCount:e,added:r});if(!s)return et;e=s.removedCount,r=s.added}r=r.length===0?r:r.map(function(N){return i.enhancer(N,void 0)});var a=r.length-e;this.updateArrayLength(o,a);var l=this.spliceItemsIntoValues(n,e,r);return(e!==0||r.length!==0)&&this.notifyArraySplice(n,r,l),this.dehanceValues(l)},t.prototype.spliceItemsIntoValues=function(n,e,r){var i;if(r.length<Jr)return(i=this.values).splice.apply(i,wt([n,e],r));var o=this.values.slice(n,n+e);return this.values=this.values.slice(0,n).concat(r,this.values.slice(n+e)),o},t.prototype.notifyArrayChildUpdate=function(n,e,r){var i=!this.owned&&w(),o=H(this),s=o||i?{object:this.array,type:"update",index:n,newValue:e,oldValue:r}:null;i&&B(S({},s,{name:this.atom.name})),this.atom.reportChanged(),o&&G(this,s),i&&k()},t.prototype.notifyArraySplice=function(n,e,r){var i=!this.owned&&w(),o=H(this),s=o||i?{object:this.array,type:"splice",index:n,removed:r,added:e,removedCount:r.length,addedCount:e.length}:null;i&&B(S({},s,{name:this.atom.name})),this.atom.reportChanged(),o&&G(this,s),i&&k()},t}(),Z=function(t){mn(n,t);function n(e,r,i,o){i===void 0&&(i="ObservableArray@"+I()),o===void 0&&(o=!1);var s=t.call(this)||this,a=new $n(i,r,s,o);if(He(s,"$mobx",a),e&&e.length){var l=Sn(!0);s.spliceWithArray(0,0,e),In(l)}return Qr&&Object.defineProperty(a.array,"0",ei),s}return n.prototype.intercept=function(e){return this.$mobx.intercept(e)},n.prototype.observe=function(e,r){return r===void 0&&(r=!1),this.$mobx.observe(e,r)},n.prototype.clear=function(){return this.splice(0)},n.prototype.concat=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),e.map(function(i){return ut(i)?i.peek():i}))},n.prototype.replace=function(e){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,e)},n.prototype.toJS=function(){return this.slice()},n.prototype.toJSON=function(){return this.toJS()},n.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},n.prototype.find=function(e,r,i){i===void 0&&(i=0),arguments.length===3&&X("The array.find fromIndex argument to find will not be supported anymore in the next major");var o=this.findIndex.apply(this,arguments);return o===-1?void 0:this.get(o)},n.prototype.findIndex=function(e,r,i){i===void 0&&(i=0),arguments.length===3&&X("The array.findIndex fromIndex argument to find will not be supported anymore in the next major");for(var o=this.peek(),s=o.length,a=i;a<s;a++)if(e.call(r,o[a],a,this))return a;return-1},n.prototype.splice=function(e,r){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(e);case 2:return this.$mobx.spliceWithArray(e,r)}return this.$mobx.spliceWithArray(e,r,i)},n.prototype.spliceWithArray=function(e,r,i){return this.$mobx.spliceWithArray(e,r,i)},n.prototype.push=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=this.$mobx;return i.spliceWithArray(i.values.length,0,e),i.values.length},n.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},n.prototype.shift=function(){return this.splice(0,1)[0]},n.prototype.unshift=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=this.$mobx;return i.spliceWithArray(0,0,e),i.values.length},n.prototype.reverse=function(){var e=this.slice();return e.reverse.apply(e,arguments)},n.prototype.sort=function(e){var r=this.slice();return r.sort.apply(r,arguments)},n.prototype.remove=function(e){var r=this.$mobx.dehanceValues(this.$mobx.values).indexOf(e);return r>-1?(this.splice(r,1),!0):!1},n.prototype.move=function(e,r){X("observableArray.move is deprecated, use .slice() & .replace() instead");function i(a){if(a<0)throw new Error("[mobx.array] Index out of bounds: "+a+" is negative");var l=this.$mobx.values.length;if(a>=l)throw new Error("[mobx.array] Index out of bounds: "+a+" is not smaller than "+l)}if(i.call(this,e),i.call(this,r),e!==r){var o=this.$mobx.values,s;e<r?s=wt(o.slice(0,e),o.slice(e+1,r+1),[o[e]],o.slice(r+1)):s=wt(o.slice(0,r),[o[e]],o.slice(r,e),o.slice(e+1)),this.replace(s)}},n.prototype.get=function(e){var r=this.$mobx;if(r){if(e<r.values.length)return r.atom.reportObserved(),r.dehanceValue(r.values[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+r.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},n.prototype.set=function(e,r){var i=this.$mobx,o=i.values;if(e<o.length){lt(i.atom);var s=o[e];if(W(i)){var a=q(i,{type:"update",object:this,index:e,newValue:r});if(!a)return;r=a.newValue}r=i.enhancer(r,s);var l=r!==s;l&&(o[e]=r,i.notifyArrayChildUpdate(e,r,s))}else if(e===o.length)i.spliceWithArray(e,0,[r]);else throw new Error("[mobx.array] Index out of bounds, "+e+" is larger than "+o.length)},n}(Ht);Ft(Z.prototype,function(){this.$mobx.atom.reportObserved();var t=this,n=0;return je({next:function(){return n<t.length?{value:t[n++],done:!1}:{done:!0,value:void 0}}})});Object.defineProperty(Z.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(t){this.$mobx.setArrayLength(t)}});he(Z.prototype,jt(),"Array");["every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach(function(t){var n=Array.prototype[t];Fe(typeof n=="function","Base function not defined on Array prototype: '"+t+"'"),he(Z.prototype,t,function(){return n.apply(this.peek(),arguments)})});lr(Z.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var ei=Un(0);function Un(t){return{enumerable:!1,configurable:!1,get:function(){return this.get(t)},set:function(n){this.set(t,n)}}}function ti(t){Object.defineProperty(Z.prototype,""+t,Un(t))}function Wn(t){for(var n=It;n<t;n++)ti(n);It=t}Wn(1e3);var ni=se("ObservableArrayAdministration",$n);function ut(t){return Pt(t)&&ni(t.$mobx)}var ri={},dt=function(){function t(n,e,r){if(e===void 0&&(e=$e),r===void 0&&(r="ObservableMap@"+I()),this.enhancer=e,this.name=r,this.$mobx=ri,this._keys=new Z(void 0,Be,this.name+".keys()",!0),typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(n)}return t.prototype._has=function(n){return this._data.has(n)},t.prototype.has=function(n){var e=this;if(!c.trackingDerivation)return this._has(n);var r=this._hasMap.get(n);if(!r){var i=r=new ie(this._has(n),Be,this.name+"."+Ze(n)+"?",!1);this._hasMap.set(n,i),Bn(i,function(){return e._hasMap.delete(n)})}return r.get()},t.prototype.set=function(n,e){var r=this._has(n);if(W(this)){var i=q(this,{type:r?"update":"add",object:this,newValue:e,name:n});if(!i)return this;e=i.newValue}return r?this._updateValue(n,e):this._addValue(n,e),this},t.prototype.delete=function(n){var e=this;if(W(this)){var r=q(this,{type:"delete",object:this,name:n});if(!r)return!1}if(this._has(n)){var i=w(),o=H(this),r=o||i?{type:"delete",object:this,oldValue:this._data.get(n).value,name:n}:null;return i&&B(S({},r,{name:this.name,key:n})),z(function(){e._keys.remove(n),e._updateHasMapEntry(n,!1);var a=e._data.get(n);a.setNewValue(void 0),e._data.delete(n)}),o&&G(this,r),i&&k(),!0}return!1},t.prototype._updateHasMapEntry=function(n,e){var r=this._hasMap.get(n);r&&r.setNewValue(e)},t.prototype._updateValue=function(n,e){var r=this._data.get(n);if(e=r.prepareNewValue(e),e!==c.UNCHANGED){var i=w(),o=H(this),s=o||i?{type:"update",object:this,oldValue:r.value,name:n,newValue:e}:null;i&&B(S({},s,{name:this.name,key:n})),r.setNewValue(e),o&&G(this,s),i&&k()}},t.prototype._addValue=function(n,e){var r=this;z(function(){var a=new ie(e,r.enhancer,r.name+"."+Ze(n),!1);r._data.set(n,a),e=a.value,r._updateHasMapEntry(n,!0),r._keys.push(n)});var i=w(),o=H(this),s=o||i?{type:"add",object:this,name:n,newValue:e}:null;i&&B(S({},s,{name:this.name,key:n})),o&&G(this,s),i&&k()},t.prototype.get=function(n){return this.has(n)?this.dehanceValue(this._data.get(n).get()):this.dehanceValue(void 0)},t.prototype.dehanceValue=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.prototype.keys=function(){return this._keys[Lt()]()},t.prototype.values=function(){var n=this,e=0;return je({next:function(){return e<n._keys.length?{value:n.get(n._keys[e++]),done:!1}:{value:void 0,done:!0}}})},t.prototype.entries=function(){var n=this,e=0;return je({next:function(){if(e<n._keys.length){var r=n._keys[e++];return{value:[r,n.get(r)],done:!1}}return{done:!0}}})},t.prototype.forEach=function(n,e){var r=this;this._keys.forEach(function(i){return n.call(e,r.get(i),i,r)})},t.prototype.merge=function(n){var e=this;return ge(n)&&(n=n.toJS()),z(function(){xe(n)?Object.keys(n).forEach(function(r){return e.set(r,n[r])}):Array.isArray(n)?n.forEach(function(r){var i=bn(r,2),o=i[0],s=i[1];return e.set(o,s)}):De(n)?n.constructor!==Map?b("Cannot initialize from classes that inherit from Map: "+n.constructor.name):n.forEach(function(r,i){return e.set(i,r)}):n!=null&&b("Cannot initialize map from "+n)}),this},t.prototype.clear=function(){var n=this;z(function(){Cn(function(){n._keys.slice().forEach(function(e){return n.delete(e)})})})},t.prototype.replace=function(n){var e=this;return z(function(){for(var r=ar(n),i=e._keys,o=Array.from(r.keys()),s=!1,a=0;a<i.length;a++){var l=i[a];i.length===o.length&&l!==o[a]&&(s=!0),r.has(l)||(s=!0,e.delete(l))}r.forEach(function(N,y){e._data.has(y)||(s=!0),e.set(y,N)}),s&&e._keys.replace(o)}),this},Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.toPOJO=function(){var n=this,e={};return this._keys.forEach(function(r){return e[typeof r=="symbol"?r:Ze(r)]=n.get(r)}),e},t.prototype.toJS=function(){var n=this,e=new Map;return this._keys.forEach(function(r){return e.set(r,n.get(r))}),e},t.prototype.toJSON=function(){return this.toPOJO()},t.prototype.toString=function(){var n=this;return this.name+"[{ "+this._keys.map(function(e){return Ze(e)+": "+(""+n.get(e))}).join(", ")+" }]"},t.prototype.observe=function(n,e){return qe(this,n)},t.prototype.intercept=function(n){return We(this,n)},t}();function Ze(t){return t&&t.toString?t.toString():new String(t).toString()}Ft(dt.prototype,function(){return this.entries()});He(dt.prototype,jt(),"Map");var ge=se("ObservableMap",dt),ii={},pt=function(){function t(n,e,r){if(e===void 0&&(e=$e),r===void 0&&(r="ObservableSet@"+I()),this.name=r,this.$mobx=ii,this._data=new Set,this._atom=dr(this.name),typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(i,o){return e(i,o,r)},n&&this.replace(n)}return t.prototype.dehanceValue=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.prototype.clear=function(){var n=this;z(function(){Cn(function(){n._data.forEach(function(e){n.delete(e)})})})},t.prototype.forEach=function(n,e){var r=this;this._data.forEach(function(i){n.call(e,i,i,r)})},Object.defineProperty(t.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),t.prototype.add=function(n){var e=this;if(lt(this._atom),W(this)){var r=q(this,{type:"add",object:this,newValue:n});if(!r)return this}if(!this.has(n)){z(function(){e._data.add(e.enhancer(n,void 0)),e._atom.reportChanged()});var i=w(),o=H(this),r=o||i?{type:"add",object:this,newValue:n}:null;o&&G(this,r)}return this},t.prototype.delete=function(n){var e=this;if(W(this)){var r=q(this,{type:"delete",object:this,oldValue:n});if(!r)return!1}if(this.has(n)){var i=w(),o=H(this),r=o||i?{type:"delete",object:this,oldValue:n}:null;return z(function(){e._atom.reportChanged(),e._data.delete(n)}),o&&G(this,r),!0}return!1},t.prototype.has=function(n){return this._atom.reportObserved(),this._data.has(this.dehanceValue(n))},t.prototype.entries=function(){var n=0,e=Ne(this.keys()),r=Ne(this.values());return je({next:function(){var i=n;return n+=1,i<r.length?{value:[e[i],r[i]],done:!1}:{done:!0}}})},t.prototype.keys=function(){return this.values()},t.prototype.values=function(){this._atom.reportObserved();var n=this,e=0,r;return this._data.values!==void 0?r=Ne(this._data.values()):(r=[],this._data.forEach(function(i){return r.push(i)})),je({next:function(){return e<r.length?{value:n.dehanceValue(r[e++]),done:!1}:{done:!0}}})},t.prototype.replace=function(n){var e=this;return we(n)&&(n=n.toJS()),z(function(){Array.isArray(n)?(e.clear(),n.forEach(function(r){return e.add(r)})):Ge(n)?(e.clear(),n.forEach(function(r){return e.add(r)})):n!=null&&b("Cannot initialize set from "+n)}),this},t.prototype.observe=function(n,e){return qe(this,n)},t.prototype.intercept=function(n){return We(this,n)},t.prototype.toJS=function(){return new Set(this)},t.prototype.toString=function(){return this.name+"[ "+Ne(this.keys()).join(", ")+" ]"},t}();Ft(pt.prototype,function(){return this.values()});He(pt.prototype,jt(),"Set");var we=se("ObservableSet",pt),qn=function(){function t(n,e,r){this.target=n,this.name=e,this.defaultEnhancer=r,this.values={}}return t.prototype.read=function(n,e){if(!(this.target!==n&&(this.illegalAccess(n,e),!this.values[e])))return this.values[e].get()},t.prototype.write=function(n,e,r){var i=this.target;i!==n&&this.illegalAccess(n,e);var o=this.values[e];if(o instanceof oe){o.set(r);return}if(W(this)){var s=q(this,{type:"update",object:i,name:e,newValue:r});if(!s)return;r=s.newValue}if(r=o.prepareNewValue(r),r!==c.UNCHANGED){var a=H(this),l=w(),s=a||l?{type:"update",object:i,oldValue:o.value,name:e,newValue:r}:null;l&&B(S({},s,{name:this.name,key:e})),o.setNewValue(r),a&&G(this,s),l&&k()}},t.prototype.remove=function(n){if(this.values[n]){var e=this.target;if(W(this)){var r=q(this,{object:e,name:n,type:"remove"});if(!r)return}try{Y();var i=H(this),o=w(),s=this.values[n].get();this.keys&&this.keys.remove(n),delete this.values[n],delete this.target[n];var r=i||o?{type:"remove",object:e,oldValue:s,name:n}:null;o&&B(S({},r,{name:this.name,key:n})),i&&G(this,r),o&&k()}finally{J()}}},t.prototype.illegalAccess=function(n,e){console.warn("Property '"+e+"' of '"+n+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},t.prototype.observe=function(n,e){return qe(this,n)},t.prototype.intercept=function(n){return We(this,n)},t.prototype.getKeys=function(){var n=this;return this.keys===void 0&&(this.keys=new Z(Object.keys(this.values).filter(function(e){return n.values[e]instanceof ie}),Be,"keys("+this.name+")",!0)),this.keys.slice()},t}();function Gt(t,n,e){n===void 0&&(n=""),e===void 0&&(e=$e);var r=t.$mobx;return r||(xe(t)||(n=(t.constructor.name||"ObservableObject")+"@"+I()),n||(n="ObservableObject@"+I()),r=new qn(t,n,e),He(t,"$mobx",r),r)}function oi(t,n,e,r){var i=Gt(t);if(W(i)){var o=q(i,{object:t,name:n,type:"add",newValue:e});if(!o)return;e=o.newValue}var s=i.values[n]=new ie(e,r,i.name+"."+n,!1);e=s.value,Object.defineProperty(t,n,ai(n)),i.keys&&i.keys.push(n),ci(i,t,n,e)}function si(t,n,e){var r=Gt(t);e.name=r.name+"."+n,e.context=t,r.values[n]=new oe(e),Object.defineProperty(t,n,li(n))}var pn=Object.create(null),fn=Object.create(null);function ai(t){return pn[t]||(pn[t]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.read(this,t)},set:function(n){this.$mobx.write(this,t,n)}})}function hn(t){var n=t.$mobx;return n||(pe(t),t.$mobx)}function li(t){return fn[t]||(fn[t]={configurable:c.computedConfigurable,enumerable:!1,get:function(){return hn(this).read(this,t)},set:function(n){hn(this).write(this,t,n)}})}function ci(t,n,e,r){var i=H(t),o=w(),s=i||o?{type:"add",object:n,name:e,newValue:r}:null;o&&B(S({},s,{name:t.name,key:e})),i&&G(t,s),o&&k()}var ui=se("ObservableObjectAdministration",qn);function ke(t){return Pt(t)?(pe(t),ui(t.$mobx)):!1}function Q(t,n){if(typeof t=="object"&&t!==null){if(ut(t))return n!==void 0&&b(!1),t.$mobx.atom;if(we(t))return t.$mobx;if(ge(t)){var e=t;if(n===void 0)return Q(e._keys);var r=e._data.get(n)||e._hasMap.get(n);return r||b(!1),r}if(pe(t),n&&!t.$mobx&&t[n],ke(t)){if(!n)return b(!1);var r=t.$mobx.values[n];return r||b(!1),r}if(Bt(t)||ct(t)||ot(t))return t}else if(typeof t=="function"&&ot(t.$mobx))return t.$mobx;return b(!1)}function Kn(t,n){if(t||b("Expecting some object"),n!==void 0)return Kn(Q(t,n));if(Bt(t)||ct(t)||ot(t)||ge(t)||we(t))return t;if(pe(t),t.$mobx)return t.$mobx;b(!1)}function di(t,n){var e;return n!==void 0?e=Q(t,n):ke(t)||ge(t)||we(t)?e=Kn(t):e=Q(t),e.name}var vn=Object.prototype.toString;function $t(t,n,e){return e===void 0&&(e=-1),Mt(t,n,e)}function Mt(t,n,e,r,i){if(t===n)return t!==0||1/t===1/n;if(t==null||n==null)return!1;if(t!==t)return n!==n;var o=typeof t;if(o!=="function"&&o!=="object"&&typeof n!="object")return!1;t=gn(t),n=gn(n);var s=vn.call(t);if(s!==vn.call(n))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:+t==0?1/+t===1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(t)===Symbol.valueOf.call(n)}var a=s==="[object Array]";if(!a){if(typeof t!="object"||typeof n!="object")return!1;var l=t.constructor,N=n.constructor;if(l!==N&&!(typeof l=="function"&&l instanceof l&&typeof N=="function"&&N instanceof N)&&"constructor"in t&&"constructor"in n)return!1}if(e===0)return!1;e<0&&(e=-1),r=r||[],i=i||[];for(var y=r.length;y--;)if(r[y]===t)return i[y]===n;if(r.push(t),i.push(n),a){if(y=t.length,y!==n.length)return!1;for(;y--;)if(!Mt(t[y],n[y],e-1,r,i))return!1}else{var M=Object.keys(t),ae=void 0;if(y=M.length,Object.keys(n).length!==y)return!1;for(;y--;)if(ae=M[y],!(pi(n,ae)&&Mt(t[ae],n[ae],e-1,r,i)))return!1}return r.pop(),i.pop(),!0}function gn(t){return ut(t)?t.peek():De(t)||ge(t)||Ge(t)||we(t)?Ne(t.entries()):t}function pi(t,n){return Object.prototype.hasOwnProperty.call(t,n)}(function(){function t(){}if(t.name!=="testCodeMinification"&&!1)var n})();var fi="$mobx";typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Br,extras:{getDebugName:di},$mobx:fi});var hi=t=>({$implicit:t});function vi(t,n){t&1&&(R(0,"span"),Et(1,"loading..."),j())}var gi=(t,n,e)=>({$implicit:t,node:n,index:e});function mi(t,n){if(t&1&&(R(0,"span"),Et(1),j()),t&2){let e=g();m(),tn(e.node.displayField)}}var Te=()=>({dontDetach:!0});function bi(t,n){if(t&1){let e=Ye();R(0,"span",3),te("click",function(i){P(e);let o=g(2);return L(o.node.mouseAction("expanderClick",i))}),V(1,"span",4),j()}if(t&2){let e=g(2);be("toggle-children-wrapper-expanded",e.node.isExpanded)("toggle-children-wrapper-collapsed",e.node.isCollapsed)}}function yi(t,n){t&1&&V(0,"span",5)}function _i(t,n){if(t&1&&(le(0),D(1,bi,2,4,"span",1)(2,yi,1,0,"span",2),ce()),t&2){let e=g();m(),u("ngIf",e.node.hasChildren),m(),u("ngIf",!e.node.hasChildren)}}function Ei(t,n){if(t&1){let e=Ye();le(0),R(1,"input",1),te("click",function(i){P(e);let o=g();return L(o.node.mouseAction("checkboxClick",i))}),j(),ce()}if(t&2){let e=g();m(),u("checked",e.node.isSelected)("indeterminate",e.node.isPartiallySelected)}}var er=(t,n,e,r)=>({$implicit:t,node:n,index:e,templates:r});function Ni(t,n){if(t&1&&V(0,"tree-node-checkbox",4),t&2){let e=g(2);u("node",e.node)}}function Oi(t,n){if(t&1){let e=Ye();R(0,"div",2),D(1,Ni,1,1,"tree-node-checkbox",3),V(2,"tree-node-expander",4),R(3,"div",5),te("click",function(i){P(e);let o=g();return L(o.node.mouseAction("click",i))})("dblclick",function(i){P(e);let o=g();return L(o.node.mouseAction("dblClick",i))})("mouseover",function(i){P(e);let o=g();return L(o.node.mouseAction("mouseOver",i))})("mouseout",function(i){P(e);let o=g();return L(o.node.mouseAction("mouseOut",i))})("contextmenu",function(i){P(e);let o=g();return L(o.node.mouseAction("contextMenu",i))})("treeDrop",function(i){P(e);let o=g();return L(o.node.onDrop(i))})("treeDropDragOver",function(i){P(e);let o=g();return L(o.node.mouseAction("dragOver",i))})("treeDropDragLeave",function(i){P(e);let o=g();return L(o.node.mouseAction("dragLeave",i))})("treeDropDragEnter",function(i){P(e);let o=g();return L(o.node.mouseAction("dragEnter",i))}),V(4,"tree-node-content",6),j()()}if(t&2){let e=g();Me("padding-left",e.node.getNodePadding()),m(),u("ngIf",e.node.options.useCheckbox),m(),u("node",e.node),m(),be("node-content-wrapper-active",e.node.isActive)("node-content-wrapper-focused",e.node.isFocused),u("treeAllowDrop",e.node.allowDrop)("allowDragoverStyling",e.node.allowDragoverStyling())("treeDrag",e.node)("treeDragEnabled",e.node.allowDrag()),m(),u("node",e.node)("index",e.index)("template",e.templates.treeNodeTemplate)}}function xi(t,n){if(t&1&&V(0,"tree-node-collection",4),t&2){let e=g(3);u("nodes",e.node.children)("templates",e.templates)("treeModel",e.node.treeModel)}}function Di(t,n){if(t&1&&V(0,"tree-loading-component",5),t&2){let e=g(3);Me("padding-left",e.node.getNodePadding()),u("template",e.templates.loadingTemplate)("node",e.node)}}function Ci(t,n){if(t&1&&(R(0,"div"),D(1,xi,1,3,"tree-node-collection",2)(2,Di,1,4,"tree-loading-component",3),j()),t&2){let e=g(2);be("tree-children",!0)("tree-children-no-padding",e.node.options.levelPadding),m(),u("ngIf",e.node.children),m(),u("ngIf",!e.node.children)}}function wi(t,n){if(t&1&&(le(0),D(1,Ci,3,6,"div",1),ce()),t&2){let e=g();m(),u("treeAnimateOpen",e.node.isExpanded)("treeAnimateOpenSpeed",e.node.options.animateSpeed)("treeAnimateOpenAcceleration",e.node.options.animateAcceleration)("treeAnimateOpenEnabled",e.node.options.animateExpand)}}function Ai(t,n){if(t&1&&V(0,"tree-node",2),t&2){let e=n.$implicit,r=n.index,i=g(2);u("node",e)("index",r)("templates",i.templates)}}function Ti(t,n){if(t&1&&(le(0),R(1,"div"),D(2,Ai,1,3,"tree-node",1),j(),ce()),t&2){let e=g();m(),Me("margin-top",e.marginTop),m(),u("ngForOf",e.viewportNodes)("ngForTrackBy",e.trackNode)}}function Si(t,n){if(t&1&&V(0,"tree-node-drop-slot",6),t&2){let e=g(3);u("dropIndex",e.node.index)("node",e.node.parent)}}function Ii(t,n){if(t&1&&(R(0,"div"),D(1,Si,1,2,"tree-node-drop-slot",3),V(2,"tree-node-wrapper",4)(3,"tree-node-children",5)(4,"tree-node-drop-slot",6),j()),t&2){let e=g(2);Jt(e.node.getClass()),be("tree-node",!0)("tree-node-expanded",e.node.isExpanded&&e.node.hasChildren)("tree-node-collapsed",e.node.isCollapsed&&e.node.hasChildren)("tree-node-leaf",e.node.isLeaf)("tree-node-active",e.node.isActive)("tree-node-focused",e.node.isFocused),m(),u("ngIf",e.index===0),m(),u("node",e.node)("index",e.index)("templates",e.templates),m(),u("node",e.node)("templates",e.templates),m(),u("dropIndex",e.node.index+1)("node",e.node.parent)}}function Mi(t,n){if(t&1&&(le(0),D(1,Ii,5,22,"div",1),Re(2,2),ce()),t&2){let e=g();m(),u("ngIf",!e.templates.treeNodeFullTemplate),m(),u("ngTemplateOutlet",e.templates.treeNodeFullTemplate)("ngTemplateOutletContext",Je(3,er,e.node,e.node,e.index,e.templates))}}var Ri=["*"];function Vi(t,n){if(t&1&&(le(0),R(1,"div"),Zt(2),j(),ce()),t&2){let e=g();m(),Me("height",e.getTotalHeight())}}var Pi=["loadingTemplate"],Li=["treeNodeTemplate"],Fi=["treeNodeWrapperTemplate"],ji=["treeNodeFullTemplate"],Bi=["viewport"],ki=(t,n,e,r)=>({loadingTemplate:t,treeNodeTemplate:n,treeNodeWrapperTemplate:e,treeNodeFullTemplate:r});function Hi(t,n){if(t&1&&V(0,"tree-node-collection",4),t&2){let e=g();u("nodes",e.treeModel.roots)("treeModel",e.treeModel)("templates",Je(3,ki,e.loadingTemplate,e.treeNodeTemplate,e.treeNodeWrapperTemplate,e.treeNodeFullTemplate))}}function Gi(t,n){if(t&1&&V(0,"tree-node-drop-slot",5),t&2){let e=g();u("dropIndex",0)("node",e.treeModel.virtualRoot)}}var Se=(()=>{class t{constructor(e,r){this.templateRef=e,this.viewContainer=r,this.templateBindings={}}ngOnInit(){this.view=this.viewContainer.createEmbeddedView(this.templateRef),this.dispose&&this.dispose(),this.shouldDetach()&&this.view.detach(),this.autoDetect(this.view)}shouldDetach(){return this.treeMobxAutorun&&this.treeMobxAutorun.detach}autoDetect(e){this.dispose=Ue(()=>e.detectChanges())}ngOnDestroy(){this.dispose&&this.dispose()}static{this.\u0275fac=function(r){return new(r||t)(x(yt),x(_t))}}static{this.\u0275dir=Ie({type:t,selectors:[["","treeMobxAutorun",""]],inputs:{treeMobxAutorun:"treeMobxAutorun"},standalone:!1})}}return t})(),A={LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,SPACE:32,CONTEXT_MENU:32},C={TOGGLE_ACTIVE:(t,n,e)=>n&&n.toggleActivated(),TOGGLE_ACTIVE_MULTI:(t,n,e)=>n&&n.toggleActivated(!0),TOGGLE_SELECTED:(t,n,e)=>n&&n.toggleSelected(),ACTIVATE:(t,n,e)=>n.setIsActive(!0),DEACTIVATE:(t,n,e)=>n.setIsActive(!1),SELECT:(t,n,e)=>n.setIsSelected(!0),DESELECT:(t,n,e)=>n.setIsSelected(!1),FOCUS:(t,n,e)=>n.focus(),TOGGLE_EXPANDED:(t,n,e)=>n.hasChildren&&n.toggleExpanded(),EXPAND:(t,n,e)=>n.expand(),COLLAPSE:(t,n,e)=>n.collapse(),DRILL_DOWN:(t,n,e)=>t.focusDrillDown(),DRILL_UP:(t,n,e)=>t.focusDrillUp(),NEXT_NODE:(t,n,e)=>t.focusNextNode(),PREVIOUS_NODE:(t,n,e)=>t.focusPreviousNode(),MOVE_NODE:(t,n,e,{from:r,to:i})=>{e.ctrlKey?t.copyNode(r,i):t.moveNode(r,i)}},Ae={mouse:{click:C.TOGGLE_ACTIVE,dblClick:null,contextMenu:null,expanderClick:C.TOGGLE_EXPANDED,checkboxClick:C.TOGGLE_SELECTED,drop:C.MOVE_NODE},keys:{[A.RIGHT]:C.DRILL_DOWN,[A.LEFT]:C.DRILL_UP,[A.DOWN]:C.NEXT_NODE,[A.UP]:C.PREVIOUS_NODE,[A.SPACE]:C.TOGGLE_ACTIVE,[A.ENTER]:C.TOGGLE_ACTIVE}},vt=class{get hasChildrenField(){return this.options.hasChildrenField||"hasChildren"}get childrenField(){return this.options.childrenField||"children"}get displayField(){return this.options.displayField||"name"}get idField(){return this.options.idField||"id"}get isExpandedField(){return this.options.isExpandedField||"isExpanded"}get getChildren(){return this.options.getChildren}get levelPadding(){return this.options.levelPadding||0}get useVirtualScroll(){return this.options.useVirtualScroll}get animateExpand(){return this.options.animateExpand}get animateSpeed(){return this.options.animateSpeed||1}get animateAcceleration(){return this.options.animateAcceleration||1.2}get scrollOnActivate(){return this.options.scrollOnActivate===void 0?!0:this.options.scrollOnActivate}get rtl(){return!!this.options.rtl}get rootId(){return this.options.rootId}get useCheckbox(){return this.options.useCheckbox}get useTriState(){return this.options.useTriState===void 0?!0:this.options.useTriState}get scrollContainer(){return this.options.scrollContainer}get allowDragoverStyling(){return this.options.allowDragoverStyling===void 0?!0:this.options.allowDragoverStyling}constructor(n={}){this.options=n,this.actionMapping={mouse:{click:this.options?.actionMapping?.mouse?.click??Ae.mouse.click,dblClick:this.options?.actionMapping?.mouse?.dblClick??Ae.mouse.dblClick,contextMenu:this.options?.actionMapping?.mouse?.contextMenu??Ae.mouse.contextMenu,expanderClick:this.options?.actionMapping?.mouse?.expanderClick??Ae.mouse.expanderClick,checkboxClick:this.options?.actionMapping?.mouse?.checkboxClick??Ae.mouse.checkboxClick,drop:this.options?.actionMapping?.mouse?.drop??Ae.mouse.drop,dragStart:this.options?.actionMapping?.mouse?.dragStart??void 0,drag:this.options?.actionMapping?.mouse?.drag??void 0,dragEnd:this.options?.actionMapping?.mouse?.dragEnd??void 0,dragOver:this.options?.actionMapping?.mouse?.dragOver??void 0,dragLeave:this.options?.actionMapping?.mouse?.dragLeave??void 0,dragEnter:this.options?.actionMapping?.mouse?.dragEnter??void 0,mouseOver:this.options?.actionMapping?.mouse?.mouseOver??void 0,mouseOut:this.options?.actionMapping?.mouse?.mouseOut??void 0},keys:{[A.RIGHT]:C.DRILL_DOWN,[A.LEFT]:C.DRILL_UP,[A.DOWN]:C.NEXT_NODE,[A.UP]:C.PREVIOUS_NODE,[A.SPACE]:C.TOGGLE_ACTIVE,[A.ENTER]:C.TOGGLE_ACTIVE}},this.options?.actionMapping?.keys&&(this.actionMapping.keys=gt(gt({},this.actionMapping.keys),this.options.actionMapping.keys)),n.rtl&&(this.actionMapping.keys[A.RIGHT]=n.actionMapping?.keys[A.RIGHT]||C.DRILL_UP,this.actionMapping.keys[A.LEFT]=n.actionMapping?.keys[A.LEFT]||C.DRILL_DOWN)}getNodeClone(n){if(this.options.getNodeClone)return this.options.getNodeClone(n);let e=Object.assign({},n.data);return e.id&&delete e.id,e}allowDrop(n,e,r){return this.options.allowDrop instanceof Function?this.options.allowDrop(n,e,r):this.options.allowDrop===void 0?!0:this.options.allowDrop}allowDrag(n){return this.options.allowDrag instanceof Function?this.options.allowDrag(n):this.options.allowDrag}nodeClass(n){return this.options.nodeClass?this.options.nodeClass(n):""}nodeHeight(n){if(n.data.virtual)return 0;let e=this.options.nodeHeight||22;return typeof e=="function"&&(e=e(n)),e+(n.index===0?2:1)*this.dropSlotHeight}get dropSlotHeight(){return typeof this.options.dropSlotHeight=="number"?this.options.dropSlotHeight:2}},E={toggleExpanded:"toggleExpanded",activate:"activate",deactivate:"deactivate",nodeActivate:"nodeActivate",nodeDeactivate:"nodeDeactivate",select:"select",deselect:"deselect",focus:"focus",blur:"blur",initialized:"initialized",updateData:"updateData",moveNode:"moveNode",copyNode:"copyNode",event:"event",loadNodeChildren:"loadNodeChildren",changeFilter:"changeFilter",stateChange:"stateChange"},T=function(t,n,e,r){var i=arguments.length,o=i<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,n,e,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(i<3?s(o):i>3?s(n,e,o):s(n,e))||o);return i>3&&o&&Object.defineProperty(n,e,o),o},O=class t{get isHidden(){return this.treeModel.isHidden(this)}get isExpanded(){return this.treeModel.isExpanded(this)}get isActive(){return this.treeModel.isActive(this)}get isFocused(){return this.treeModel.isNodeFocused(this)}get isSelected(){return this.isSelectable()?this.treeModel.isSelected(this):this.children.some(n=>n.isSelected)}get isAllSelected(){return this.isSelectable()?this.treeModel.isSelected(this):this.children.every(n=>n.isAllSelected)}get isPartiallySelected(){return this.isSelected&&!this.isAllSelected}get level(){return this.parent?this.parent.level+1:0}get path(){return this.parent?[...this.parent.path,this.id]:[]}get elementRef(){throw`Element Ref is no longer supported since introducing virtual scroll

      You may use a template to obtain a reference to the element`}get originalNode(){return this._originalNode}constructor(n,e,r,i){this.data=n,this.parent=e,this.treeModel=r,this.position=0,this.allowDrop=(o,s)=>this.options.allowDrop(o,{parent:this,index:0},s),this.allowDragoverStyling=()=>this.options.allowDragoverStyling,(this.id===void 0||this.id===null)&&(this.id=$i()),this.index=i,this.getField("children")&&this._initChildren(),this.autoLoadChildren()}get hasChildren(){return!!(this.getField("hasChildren")||this.children&&this.children.length>0)}get isCollapsed(){return!this.isExpanded}get isLeaf(){return!this.hasChildren}get isRoot(){return this.parent.data.virtual}get realParent(){return this.isRoot?null:this.parent}get options(){return this.treeModel.options}fireEvent(n){this.treeModel.fireEvent(n)}get displayField(){return this.getField("display")}get id(){return this.getField("id")}set id(n){this.setField("id",n)}getField(n){return this.data[this.options[`${n}Field`]]}setField(n,e){this.data[this.options[`${n}Field`]]=e}_findAdjacentSibling(n,e=!1){let r=this._getParentsChildren(e),i=r.indexOf(this);return r.length>i+n?r[i+n]:null}findNextSibling(n=!1){return this._findAdjacentSibling(1,n)}findPreviousSibling(n=!1){return this._findAdjacentSibling(-1,n)}getVisibleChildren(){return this.visibleChildren}get visibleChildren(){return(this.children||[]).filter(n=>!n.isHidden)}getFirstChild(n=!1){let e=n?this.visibleChildren:this.children;return e!=null&&e.length?e[0]:null}getLastChild(n=!1){let e=n?this.visibleChildren:this.children;return e!=null&&e.length?e[e.length-1]:null}findNextNode(n=!0,e=!1){return n&&this.isExpanded&&this.getFirstChild(e)||this.findNextSibling(e)||this.parent&&this.parent.findNextNode(!1,e)}findPreviousNode(n=!1){let e=this.findPreviousSibling(n);return e?e._getLastOpenDescendant(n):this.realParent}_getLastOpenDescendant(n=!1){let e=this.getLastChild(n);return this.isCollapsed||!e?this:e._getLastOpenDescendant(n)}_getParentsChildren(n=!1){return this.parent&&(n?this.parent.getVisibleChildren():this.parent.children)||[]}getIndexInParent(n=!1){return this._getParentsChildren(n).indexOf(this)}isDescendantOf(n){return this===n?!0:this.parent&&this.parent.isDescendantOf(n)}getNodePadding(){return this.options.levelPadding*(this.level-1)+"px"}getClass(){return[this.options.nodeClass(this),`tree-node-level-${this.level}`].join(" ")}onDrop(n){this.mouseAction("drop",n.event,{from:n.element,to:{parent:this,index:0,dropOnNode:!0}})}allowDrag(){return this.options.allowDrag(this)}loadNodeChildren(){return this.options.getChildren?Promise.resolve(this.options.getChildren(this)).then(n=>{n&&(this.setField("children",n),this._initChildren(),this.options.useTriState&&this.treeModel.isSelected(this)&&this.setIsSelected(!0),this.children.forEach(e=>{e.getField("isExpanded")&&e.hasChildren&&e.expand()}))}).then(()=>{this.fireEvent({eventName:E.loadNodeChildren,node:this})}):Promise.resolve()}expand(){return this.isExpanded||this.toggleExpanded(),this}collapse(){return this.isExpanded&&this.toggleExpanded(),this}doForAll(n){Promise.resolve(n(this)).then(()=>{this.children&&this.children.forEach(e=>e.doForAll(n))})}expandAll(){this.doForAll(n=>n.expand())}collapseAll(){this.doForAll(n=>n.collapse())}ensureVisible(){return this.realParent&&(this.realParent.expand(),this.realParent.ensureVisible()),this}toggleExpanded(){return this.setIsExpanded(!this.isExpanded),this}setIsExpanded(n){return this.hasChildren&&this.treeModel.setExpandedNode(this,n),this}autoLoadChildren(){this.handler=ve(()=>this.isExpanded,n=>{!this.children&&this.hasChildren&&n&&this.loadNodeChildren()},{fireImmediately:!0})}dispose(){this.children&&this.children.forEach(n=>n.dispose()),this.handler&&this.handler(),this.parent=null,this.children=null}setIsActive(n,e=!1){return this.treeModel.setActiveNode(this,n,e),n&&this.focus(this.options.scrollOnActivate),this}isSelectable(){return this.isLeaf||!this.children||!this.options.useTriState}setIsSelected(n){return this.isSelectable()?this.treeModel.setSelectedNode(this,n):this.visibleChildren.forEach(e=>e.setIsSelected(n)),this}toggleSelected(){return this.setIsSelected(!this.isSelected),this}toggleActivated(n=!1){return this.setIsActive(!this.isActive,n),this}setActiveAndVisible(n=!1){return this.setIsActive(!0,n).ensureVisible(),setTimeout(this.scrollIntoView.bind(this)),this}scrollIntoView(n=!1){this.treeModel.virtualScroll.scrollIntoView(this,n)}focus(n=!0){let e=this.treeModel.getFocusedNode();return this.treeModel.setFocusedNode(this),n&&this.scrollIntoView(),e&&this.fireEvent({eventName:E.blur,node:e}),this.fireEvent({eventName:E.focus,node:this}),this}blur(){let n=this.treeModel.getFocusedNode();return this.treeModel.setFocusedNode(null),n&&this.fireEvent({eventName:E.blur,node:this}),this}setIsHidden(n){this.treeModel.setIsHidden(this,n)}hide(){this.setIsHidden(!0)}show(){this.setIsHidden(!1)}mouseAction(n,e,r=null){this.treeModel.setFocus(!0);let o=this.options.actionMapping.mouse[n];o&&o(this.treeModel,this,e,r)}getSelfHeight(){return this.options.nodeHeight(this)}_initChildren(){this.children=this.getField("children").map((n,e)=>new t(n,this,this.treeModel,e))}};T([_],O.prototype,"isHidden",null);T([_],O.prototype,"isExpanded",null);T([_],O.prototype,"isActive",null);T([_],O.prototype,"isFocused",null);T([_],O.prototype,"isSelected",null);T([_],O.prototype,"isAllSelected",null);T([_],O.prototype,"isPartiallySelected",null);T([p],O.prototype,"children",void 0);T([p],O.prototype,"index",void 0);T([p],O.prototype,"position",void 0);T([p],O.prototype,"height",void 0);T([_],O.prototype,"level",null);T([_],O.prototype,"path",null);T([_],O.prototype,"visibleChildren",null);T([f],O.prototype,"setIsSelected",null);T([f],O.prototype,"_initChildren",null);function $i(){return Math.floor(Math.random()*1e13)}var h=function(t,n,e,r){var i=arguments.length,o=i<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,n,e,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(i<3?s(o):i>3?s(n,e,o):s(n,e))||o);return i>3&&o&&Object.defineProperty(n,e,o),o},d=(()=>{class t{constructor(){this.options=new vt,this.eventNames=Object.keys(E),this.expandedNodeIds={},this.selectedLeafNodeIds={},this.activeNodeIds={},this.hiddenNodeIds={},this.focusedNodeId=null,this.firstUpdate=!0,this.subscriptions=[]}static{this.focusedTree=null}fireEvent(e){e.treeModel=this,this.events[e.eventName].emit(e),this.events.event.emit(e)}subscribe(e,r){let i=this.events[e].subscribe(r);this.subscriptions.push(i)}getFocusedNode(){return this.focusedNode}getActiveNode(){return this.activeNodes[0]}getActiveNodes(){return this.activeNodes}getVisibleRoots(){return this.virtualRoot.visibleChildren}getFirstRoot(e=!1){let r=e?this.getVisibleRoots():this.roots;return r!=null&&r.length?r[0]:null}getLastRoot(e=!1){let r=e?this.getVisibleRoots():this.roots;return r!=null&&r.length?r[r.length-1]:null}get isFocused(){return t.focusedTree===this}isNodeFocused(e){return this.focusedNode===e}isEmptyTree(){return this.roots&&this.roots.length===0}get focusedNode(){return this.focusedNodeId?this.getNodeById(this.focusedNodeId):null}get expandedNodes(){return Object.keys(this.expandedNodeIds).filter(r=>this.expandedNodeIds[r]).map(r=>this.getNodeById(r)).filter(Boolean)}get activeNodes(){return Object.keys(this.activeNodeIds).filter(r=>this.activeNodeIds[r]).map(r=>this.getNodeById(r)).filter(Boolean)}get hiddenNodes(){return Object.keys(this.hiddenNodeIds).filter(r=>this.hiddenNodeIds[r]).map(r=>this.getNodeById(r)).filter(Boolean)}get selectedLeafNodes(){return Object.keys(this.selectedLeafNodeIds).filter(r=>this.selectedLeafNodeIds[r]).map(r=>this.getNodeById(r)).filter(Boolean)}getNodeByPath(e,r=null){if(!e)return null;if(r=r||this.virtualRoot,e.length===0)return r;if(!r.children)return null;let i=e.shift(),o=r.children.find(s=>s.id===i);return o?this.getNodeByPath(e,o):null}getNodeById(e){let r=e.toString();return this.getNodeBy(i=>i.id.toString()===r)}getNodeBy(e,r=null){if(r=r||this.virtualRoot,!r.children)return null;let i=r.children.find(e);if(i)return i;for(let o of r.children){let s=this.getNodeBy(e,o);if(s)return s}}isExpanded(e){return this.expandedNodeIds[e.id]}isHidden(e){return this.hiddenNodeIds[e.id]}isActive(e){return this.activeNodeIds[e.id]}isSelected(e){return this.selectedLeafNodeIds[e.id]}ngOnDestroy(){this.dispose(),this.unsubscribeAll()}dispose(){this.virtualRoot&&this.virtualRoot.dispose()}unsubscribeAll(){this.subscriptions.forEach(e=>e.unsubscribe()),this.subscriptions=[]}setData({nodes:e,options:r=null,events:i=null}){r&&(this.options=new vt(r)),i&&(this.events=i),e&&(this.nodes=e),this.update()}update(){let e={id:this.options.rootId,virtual:!0,[this.options.childrenField]:this.nodes};this.dispose(),this.virtualRoot=new O(e,null,this,0),this.roots=this.virtualRoot.children,this.firstUpdate?this.roots&&(this.firstUpdate=!1,this._calculateExpandedNodes()):this.fireEvent({eventName:E.updateData})}setFocusedNode(e){this.focusedNodeId=e?e.id:null}setFocus(e){t.focusedTree=e?this:null}doForAll(e){this.roots.forEach(r=>r.doForAll(e))}focusNextNode(){let e=this.getFocusedNode(),r=e?e.findNextNode(!0,!0):this.getFirstRoot(!0);r&&r.focus()}focusPreviousNode(){let e=this.getFocusedNode(),r=e?e.findPreviousNode(!0):this.getLastRoot(!0);r&&r.focus()}focusDrillDown(){let e=this.getFocusedNode();if(e&&e.isCollapsed&&e.hasChildren)e.toggleExpanded();else{let r=e?e.getFirstChild(!0):this.getFirstRoot(!0);r&&r.focus()}}focusDrillUp(){let e=this.getFocusedNode();if(e)if(e.isExpanded)e.toggleExpanded();else{let r=e.realParent;r&&r.focus()}}setActiveNode(e,r,i=!1){i?this._setActiveNodeMulti(e,r):this._setActiveNodeSingle(e,r),r?(e.focus(this.options.scrollOnActivate),this.fireEvent({eventName:E.activate,node:e}),this.fireEvent({eventName:E.nodeActivate,node:e})):(this.fireEvent({eventName:E.deactivate,node:e}),this.fireEvent({eventName:E.nodeDeactivate,node:e}))}setSelectedNode(e,r){this.selectedLeafNodeIds=Object.assign({},this.selectedLeafNodeIds,{[e.id]:r}),r?(e.focus(),this.fireEvent({eventName:E.select,node:e})):this.fireEvent({eventName:E.deselect,node:e})}setExpandedNode(e,r){this.expandedNodeIds=Object.assign({},this.expandedNodeIds,{[e.id]:r}),this.fireEvent({eventName:E.toggleExpanded,node:e,isExpanded:r})}expandAll(){this.roots.forEach(e=>e.expandAll())}collapseAll(){this.roots.forEach(e=>e.collapseAll())}setIsHidden(e,r){this.hiddenNodeIds=Object.assign({},this.hiddenNodeIds,{[e.id]:r})}setHiddenNodeIds(e){this.hiddenNodeIds=e.reduce((r,i)=>Object.assign(r,{[i]:!0}),{})}performKeyAction(e,r){let i=this.options.actionMapping.keys[r.keyCode];return i?(r.preventDefault(),i(this,e,r),!0):!1}filterNodes(e,r=!0){let i;if(!e)return this.clearFilter();if(e&&typeof e.valueOf()=="string")i=s=>s.displayField.toLowerCase().indexOf(e.toLowerCase())!==-1;else if(e&&typeof e=="function")i=e;else{console.error("Don't know what to do with filter",e),console.error("Should be either a string or function");return}let o={};this.roots.forEach(s=>this._filterNode(o,s,i,r)),this.hiddenNodeIds=o,this.fireEvent({eventName:E.changeFilter})}clearFilter(){this.hiddenNodeIds={},this.fireEvent({eventName:E.changeFilter})}moveNode(e,r){let i=e.getIndexInParent(),o=e.parent;if(!this.canMoveNode(e,r,i))return;let s=o.getField("children");r.parent.getField("children")||r.parent.setField("children",[]);let a=r.parent.getField("children"),l=s.splice(i,1)[0],N=o===r.parent&&r.index>i?r.index-1:r.index;a.splice(N,0,l),o.treeModel.update(),r.parent.treeModel!==o.treeModel&&r.parent.treeModel.update(),this.fireEvent({eventName:E.moveNode,node:l,to:{parent:r.parent.data,index:N},from:{parent:o.data,index:i}})}copyNode(e,r){let i=e.getIndexInParent();if(!this.canMoveNode(e,r,i))return;r.parent.getField("children")||r.parent.setField("children",[]);let o=r.parent.getField("children"),s=this.options.getNodeClone(e);o.splice(r.index,0,s),e.treeModel.update(),r.parent.treeModel!==e.treeModel&&r.parent.treeModel.update(),this.fireEvent({eventName:E.copyNode,node:s,to:{parent:r.parent.data,index:r.index}})}getState(){return{expandedNodeIds:this.expandedNodeIds,selectedLeafNodeIds:this.selectedLeafNodeIds,activeNodeIds:this.activeNodeIds,hiddenNodeIds:this.hiddenNodeIds,focusedNodeId:this.focusedNodeId}}setState(e){e&&Object.assign(this,{expandedNodeIds:e.expandedNodeIds||{},selectedLeafNodeIds:e.selectedLeafNodeIds||{},activeNodeIds:e.activeNodeIds||{},hiddenNodeIds:e.hiddenNodeIds||{},focusedNodeId:e.focusedNodeId})}subscribeToState(e){Ue(()=>e(this.getState()))}canMoveNode(e,r,i=void 0){let o=i||e.getIndexInParent();return e.parent===r.parent&&i===r.index?!1:!r.parent.isDescendantOf(e)}calculateExpandedNodes(){this._calculateExpandedNodes()}_filterNode(e,r,i,o){let s=i(r);return r.children&&r.children.forEach(a=>{this._filterNode(e,a,i,o)&&(s=!0)}),s||(e[r.id]=!0),o&&s&&r.ensureVisible(),s}_calculateExpandedNodes(e=null){e=e||this.virtualRoot,e.data[this.options.isExpandedField]&&(this.expandedNodeIds=Object.assign({},this.expandedNodeIds,{[e.id]:!0})),e.children&&e.children.forEach(r=>this._calculateExpandedNodes(r))}_setActiveNodeSingle(e,r){this.activeNodes.filter(i=>i!==e).forEach(i=>{this.fireEvent({eventName:E.deactivate,node:i}),this.fireEvent({eventName:E.nodeDeactivate,node:i})}),r?this.activeNodeIds={[e.id]:!0}:this.activeNodeIds={}}_setActiveNodeMulti(e,r){this.activeNodeIds=Object.assign({},this.activeNodeIds,{[e.id]:r})}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Ke({token:t,factory:t.\u0275fac})}}return t})();h([p],d.prototype,"roots",void 0);h([p],d.prototype,"expandedNodeIds",void 0);h([p],d.prototype,"selectedLeafNodeIds",void 0);h([p],d.prototype,"activeNodeIds",void 0);h([p],d.prototype,"hiddenNodeIds",void 0);h([p],d.prototype,"focusedNodeId",void 0);h([p],d.prototype,"virtualRoot",void 0);h([_],d.prototype,"focusedNode",null);h([_],d.prototype,"expandedNodes",null);h([_],d.prototype,"activeNodes",null);h([_],d.prototype,"hiddenNodes",null);h([_],d.prototype,"selectedLeafNodes",null);h([f],d.prototype,"setData",null);h([f],d.prototype,"update",null);h([f],d.prototype,"setFocusedNode",null);h([f],d.prototype,"setFocus",null);h([f],d.prototype,"doForAll",null);h([f],d.prototype,"focusNextNode",null);h([f],d.prototype,"focusPreviousNode",null);h([f],d.prototype,"focusDrillDown",null);h([f],d.prototype,"focusDrillUp",null);h([f],d.prototype,"setActiveNode",null);h([f],d.prototype,"setSelectedNode",null);h([f],d.prototype,"setExpandedNode",null);h([f],d.prototype,"expandAll",null);h([f],d.prototype,"collapseAll",null);h([f],d.prototype,"setIsHidden",null);h([f],d.prototype,"setHiddenNodeIds",null);h([f],d.prototype,"filterNodes",null);h([f],d.prototype,"clearFilter",null);h([f],d.prototype,"moveNode",null);h([f],d.prototype,"copyNode",null);h([f],d.prototype,"setState",null);var Ut=(()=>{class t{constructor(){this._draggedElement=null}set(e){this._draggedElement=e}get(){return this._draggedElement}isDragging(){return!!this.get()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Ke({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),ee=function(t,n,e,r){var i=arguments.length,o=i<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,n,e,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(i<3?s(o):i>3?s(n,e,o):s(n,e))||o);return i>3&&o&&Object.defineProperty(n,e,o),o},zn=500,ft=150,$=(()=>{class t{get y(){return this.yBlocks*ft}get totalHeight(){return this.treeModel.virtualRoot?this.treeModel.virtualRoot.height:0}constructor(e){this.treeModel=e,this.yBlocks=0,this.x=0,this.viewportHeight=null,this.viewport=null,e.virtualScroll=this,this._dispose=[Ue(()=>this.fixScroll())]}fireEvent(e){this.treeModel.fireEvent(e)}init(){let e=this.recalcPositions.bind(this);e(),this._dispose=[...this._dispose,ve(()=>this.treeModel.roots,e),ve(()=>this.treeModel.expandedNodeIds,e),ve(()=>this.treeModel.hiddenNodeIds,e)],this.treeModel.subscribe(E.loadNodeChildren,e)}isEnabled(){return this.treeModel.options.useVirtualScroll}_setYBlocks(e){this.yBlocks=e}recalcPositions(){this.treeModel.virtualRoot.height=this._getPositionAfter(this.treeModel.getVisibleRoots(),0)}_getPositionAfter(e,r){let i=r;return e.forEach(o=>{o.position=i,i=this._getPositionAfterNode(o,i)}),i}_getPositionAfterNode(e,r){let i=e.getSelfHeight()+r;return e.children&&e.isExpanded&&(i=this._getPositionAfter(e.visibleChildren,i)),e.height=i-r,i}clear(){this._dispose.forEach(e=>e())}setViewport(e){Object.assign(this,{viewport:e,x:e.scrollLeft,yBlocks:Math.round(e.scrollTop/ft),viewportHeight:e.getBoundingClientRect?e.getBoundingClientRect().height:0})}scrollIntoView(e,r,i=!0){if(e.options.scrollContainer){let o=e.options.scrollContainer,s=o.getBoundingClientRect().height,a=o.getBoundingClientRect().top,l=this.viewport.getBoundingClientRect().top+e.position-a;(r||l<o.scrollTop||l+e.getSelfHeight()>o.scrollTop+s)&&(o.scrollTop=i?l-s/2:l)}else(r||e.position<this.y||e.position+e.getSelfHeight()>this.y+this.viewportHeight)&&this.viewport&&(this.viewport.scrollTop=i?e.position-this.viewportHeight/2:e.position,this._setYBlocks(Math.floor(this.viewport.scrollTop/ft)))}getViewportNodes(e){if(!e)return[];let r=e.filter(l=>!l.isHidden);if(!this.isEnabled())return r;if(!this.viewportHeight||!r.length)return[];let i=r.slice(-1)[0];if(!i.height&&i.position===0)return[];let o=Xn(r,l=>l.position+zn>this.y||l.position+l.height>this.y),s=Xn(r,l=>l.position-zn>this.y+this.viewportHeight,o),a=[];for(let l=o;l<=s;l++)a.push(r[l]);return a}fixScroll(){let e=Math.max(0,this.totalHeight-this.viewportHeight);this.y<0&&this._setYBlocks(0),this.y>e&&this._setYBlocks(e/ft)}static{this.\u0275fac=function(r){return new(r||t)(zt(d))}}static{this.\u0275prov=Ke({token:t,factory:t.\u0275fac})}}return t})();ee([p],$.prototype,"yBlocks",void 0);ee([p],$.prototype,"x",void 0);ee([p],$.prototype,"viewportHeight",void 0);ee([_],$.prototype,"y",null);ee([_],$.prototype,"totalHeight",null);ee([f],$.prototype,"_setYBlocks",null);ee([f],$.prototype,"recalcPositions",null);ee([f],$.prototype,"setViewport",null);ee([f],$.prototype,"scrollIntoView",null);function Xn(t,n,e=0){let r=e,i=t.length-1;for(;r!==i;){let o=Math.floor((r+i)/2);n(t[o])?i=o:r===o?r=i:r=o}return r}var Ui=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=F({type:t,selectors:[["tree-loading-component"]],inputs:{template:"template",node:"node"},standalone:!1,decls:2,vars:5,consts:[[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,i){r&1&&(D(0,vi,2,0,"span",0),Re(1,1)),r&2&&(u("ngIf",!i.template),m(),u("ngTemplateOutlet",i.template)("ngTemplateOutletContext",nn(3,hi,i.node)))},dependencies:[ne,Pe],encapsulation:2})}}return t})(),Yn="is-dragging-over",Jn="is-dragging-over-disabled",tr=(()=>{class t{set treeAllowDrop(e){e instanceof Function?this._allowDrop=e:this._allowDrop=(r,i)=>e}allowDrop(e){return this._allowDrop(this.treeDraggedElement.get(),e)}constructor(e,r,i,o){this.el=e,this.renderer=r,this.treeDraggedElement=i,this.ngZone=o,this.allowDragoverStyling=!0,this.onDropCallback=new me,this.onDragOverCallback=new me,this.onDragLeaveCallback=new me,this.onDragEnterCallback=new me,this._allowDrop=(s,a)=>!0,this.dragOverEventHandler=this.onDragOver.bind(this),this.dragEnterEventHandler=this.onDragEnter.bind(this),this.dragLeaveEventHandler=this.onDragLeave.bind(this)}ngAfterViewInit(){let e=this.el.nativeElement;this.ngZone.runOutsideAngular(()=>{e.addEventListener("dragover",this.dragOverEventHandler),e.addEventListener("dragenter",this.dragEnterEventHandler),e.addEventListener("dragleave",this.dragLeaveEventHandler)})}ngOnDestroy(){let e=this.el.nativeElement;e.removeEventListener("dragover",this.dragOverEventHandler),e.removeEventListener("dragenter",this.dragEnterEventHandler),e.removeEventListener("dragleave",this.dragLeaveEventHandler)}onDragOver(e){if(!this.allowDrop(e))return this.allowDragoverStyling?this.addDisabledClass():void 0;this.onDragOverCallback.emit({event:e,element:this.treeDraggedElement.get()}),e.preventDefault(),this.allowDragoverStyling&&this.addClass()}onDragEnter(e){this.allowDrop(e)&&(e.preventDefault(),this.onDragEnterCallback.emit({event:e,element:this.treeDraggedElement.get()}))}onDragLeave(e){if(!this.allowDrop(e))return this.allowDragoverStyling?this.removeDisabledClass():void 0;this.onDragLeaveCallback.emit({event:e,element:this.treeDraggedElement.get()}),this.allowDragoverStyling&&this.removeClass()}onDrop(e){this.allowDrop(e)&&(e.preventDefault(),this.onDropCallback.emit({event:e,element:this.treeDraggedElement.get()}),this.allowDragoverStyling&&this.removeClass(),this.treeDraggedElement.set(null))}addClass(){this.renderer.addClass(this.el.nativeElement,Yn)}removeClass(){this.renderer.removeClass(this.el.nativeElement,Yn)}addDisabledClass(){this.renderer.addClass(this.el.nativeElement,Jn)}removeDisabledClass(){this.renderer.removeClass(this.el.nativeElement,Jn)}static{this.\u0275fac=function(r){return new(r||t)(x(ze),x(Xe),x(Ut),x(mt))}}static{this.\u0275dir=Ie({type:t,selectors:[["","treeDrop",""]],hostBindings:function(r,i){r&1&&te("drop",function(s){return i.onDrop(s)})},inputs:{allowDragoverStyling:"allowDragoverStyling",treeAllowDrop:"treeAllowDrop"},outputs:{onDropCallback:"treeDrop",onDragOverCallback:"treeDropDragOver",onDragLeaveCallback:"treeDropDragLeave",onDragEnterCallback:"treeDropDragEnter"},standalone:!1})}}return t})(),nr=(()=>{class t{onDrop(e){this.node.mouseAction("drop",e.event,{from:e.element,to:{parent:this.node,index:this.dropIndex}})}allowDrop(e,r){return this.node.options.allowDrop(e,{parent:this.node,index:this.dropIndex},r)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=F({type:t,selectors:[["TreeNodeDropSlot"],["tree-node-drop-slot"]],inputs:{node:"node",dropIndex:"dropIndex"},standalone:!1,decls:1,vars:2,consts:[[1,"node-drop-slot",3,"treeDrop","treeAllowDrop","allowDragoverStyling"]],template:function(r,i){r&1&&(R(0,"div",0),te("treeDrop",function(s){return i.onDrop(s)}),j()),r&2&&u("treeAllowDrop",i.allowDrop.bind(i))("allowDragoverStyling",!0)},dependencies:[tr],encapsulation:2})}}return t})();function Wi(...t){return f(...t)}var qi=Object.assign(Wi,f);function Ki(...t){return _(...t)}var zi=Object.assign(Ki,_);function Xi(...t){return p(...t)}var Qn=Object.assign(Xi,p),Zn=1.005,Yi=(()=>{class t{set isOpen(e){e?(this._show(),this.isEnabled&&this._isOpen===!1&&this._animateOpen()):this.isEnabled?this._animateClose():this._hide(),this._isOpen=!!e}constructor(e,r,i){this.renderer=e,this.templateRef=r,this.viewContainerRef=i}_show(){this.innerElement||(this.innerElement=this.viewContainerRef.createEmbeddedView(this.templateRef).rootNodes[0])}_hide(){this.viewContainerRef.clear(),this.innerElement=null}_animateOpen(){let e=this.animateSpeed,r=this.animateAcceleration,i=0;this.renderer.setStyle(this.innerElement,"max-height","0"),setTimeout(()=>{let o=setInterval(()=>{if(!this._isOpen||!this.innerElement)return clearInterval(o);i+=e;let s=Math.round(i);this.renderer.setStyle(this.innerElement,"max-height",`${s}px`);let a=this.innerElement.getBoundingClientRect?this.innerElement.getBoundingClientRect().height:0;e*=r,r*=Zn,a<s&&(this.renderer.setStyle(this.innerElement,"max-height",null),clearInterval(o))},17)})}_animateClose(){if(!this.innerElement)return;let e=this.animateSpeed,r=this.animateAcceleration,i=this.innerElement.getBoundingClientRect().height,o=setInterval(()=>{if(this._isOpen||!this.innerElement)return clearInterval(o);i-=e,this.renderer.setStyle(this.innerElement,"max-height",`${i}px`),e*=r,r*=Zn,i<=0&&(this.viewContainerRef.clear(),this.innerElement=null,clearInterval(o))},17)}static{this.\u0275fac=function(r){return new(r||t)(x(Xe),x(yt),x(_t))}}static{this.\u0275dir=Ie({type:t,selectors:[["","treeAnimateOpen",""]],inputs:{animateSpeed:[0,"treeAnimateOpenSpeed","animateSpeed"],animateAcceleration:[0,"treeAnimateOpenAcceleration","animateAcceleration"],isEnabled:[0,"treeAnimateOpenEnabled","isEnabled"],isOpen:[0,"treeAnimateOpen","isOpen"]},standalone:!1})}}return t})(),Ji=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=F({type:t,selectors:[["tree-node-content"]],inputs:{node:"node",index:"index",template:"template"},standalone:!1,decls:2,vars:7,consts:[[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,i){r&1&&(D(0,mi,2,1,"span",0),Re(1,1)),r&2&&(u("ngIf",!i.template),m(),u("ngTemplateOutlet",i.template)("ngTemplateOutletContext",rn(3,gi,i.node,i.node,i.index)))},dependencies:[ne,Pe],encapsulation:2})}}return t})();var Qi=(()=>{class t{constructor(e,r,i,o){this.el=e,this.renderer=r,this.treeDraggedElement=i,this.ngZone=o,this.dragEventHandler=this.onDrag.bind(this)}ngAfterViewInit(){let e=this.el.nativeElement;this.ngZone.runOutsideAngular(()=>{e.addEventListener("drag",this.dragEventHandler)})}ngDoCheck(){this.renderer.setAttribute(this.el.nativeElement,"draggable",this.treeDragEnabled?"true":"false")}ngOnDestroy(){this.el.nativeElement.removeEventListener("drag",this.dragEventHandler)}onDragStart(e){e.dataTransfer.setData("text",e.target.id),this.treeDraggedElement.set(this.draggedElement),this.draggedElement.mouseAction&&this.draggedElement.mouseAction("dragStart",e)}onDrag(e){this.draggedElement.mouseAction&&this.draggedElement.mouseAction("drag",e)}onDragEnd(){this.draggedElement.mouseAction&&this.draggedElement.mouseAction("dragEnd"),this.treeDraggedElement.set(null)}static{this.\u0275fac=function(r){return new(r||t)(x(ze),x(Xe),x(Ut),x(mt))}}static{this.\u0275dir=Ie({type:t,selectors:[["","treeDrag",""]],hostBindings:function(r,i){r&1&&te("dragstart",function(s){return i.onDragStart(s)})("dragend",function(){return i.onDragEnd()})},inputs:{draggedElement:[0,"treeDrag","draggedElement"],treeDragEnabled:"treeDragEnabled"},standalone:!1})}}return t})(),Zi=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=F({type:t,selectors:[["tree-node-expander"]],inputs:{node:"node"},standalone:!1,decls:1,vars:2,consts:[[4,"treeMobxAutorun"],["class","toggle-children-wrapper",3,"toggle-children-wrapper-expanded","toggle-children-wrapper-collapsed","click",4,"ngIf"],["class","toggle-children-placeholder",4,"ngIf"],[1,"toggle-children-wrapper",3,"click"],[1,"toggle-children"],[1,"toggle-children-placeholder"]],template:function(r,i){r&1&&D(0,_i,3,2,"ng-container",0),r&2&&u("treeMobxAutorun",ue(1,Te))},dependencies:[ne,Se],encapsulation:2})}}return t})(),eo=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=F({type:t,selectors:[["tree-node-checkbox"]],inputs:{node:"node"},standalone:!1,decls:1,vars:2,consts:[[4,"treeMobxAutorun"],["type","checkbox",1,"tree-node-checkbox",3,"click","checked","indeterminate"]],template:function(r,i){r&1&&D(0,Ei,2,2,"ng-container",0),r&2&&u("treeMobxAutorun",ue(1,Te))},dependencies:[Se],encapsulation:2})}}return t})(),to=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=F({type:t,selectors:[["tree-node-wrapper"]],inputs:{node:"node",index:"index",templates:"templates"},standalone:!1,decls:2,vars:8,consts:[["class","node-wrapper",3,"padding-left",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"node-wrapper"],[3,"node",4,"ngIf"],[3,"node"],[1,"node-content-wrapper",3,"click","dblclick","mouseover","mouseout","contextmenu","treeDrop","treeDropDragOver","treeDropDragLeave","treeDropDragEnter","treeAllowDrop","allowDragoverStyling","treeDrag","treeDragEnabled"],[3,"node","index","template"]],template:function(r,i){r&1&&(D(0,Oi,5,15,"div",0),Re(1,1)),r&2&&(u("ngIf",!i.templates.treeNodeWrapperTemplate),m(),u("ngTemplateOutlet",i.templates.treeNodeWrapperTemplate)("ngTemplateOutletContext",Je(3,er,i.node,i.node,i.index,i.templates)))},dependencies:[ne,Pe,Ji,tr,Qi,Zi,eo],encapsulation:2})}}return t})(),ht=function(t,n,e,r){var i=arguments.length,o=i<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,n,e,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(i<3?s(o):i>3?s(n,e,o):s(n,e))||o);return i>3&&o&&Object.defineProperty(n,e,o),o},no=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=F({type:t,selectors:[["tree-node-children"]],inputs:{node:"node",templates:"templates"},standalone:!1,decls:1,vars:2,consts:[[4,"treeMobxAutorun"],[3,"tree-children","tree-children-no-padding",4,"treeAnimateOpen","treeAnimateOpenSpeed","treeAnimateOpenAcceleration","treeAnimateOpenEnabled"],[3,"nodes","templates","treeModel",4,"ngIf"],["class","tree-node-loading",3,"padding-left","template","node",4,"ngIf"],[3,"nodes","templates","treeModel"],[1,"tree-node-loading",3,"template","node"]],template:function(r,i){r&1&&D(0,wi,2,4,"ng-container",0),r&2&&u("treeMobxAutorun",ue(1,Te))},dependencies:()=>[ne,Ui,rr,Yi,Se],encapsulation:2})}}return t})(),rr=(()=>{class t{constructor(){this._dispose=[]}get nodes(){return this._nodes}set nodes(e){this.setNodes(e)}get marginTop(){let e=this.viewportNodes&&this.viewportNodes.length&&this.viewportNodes[0];return`${e&&e.parent?e.position-e.parent.position-e.parent.getSelfHeight():0}px`}setNodes(e){this._nodes=e}ngOnInit(){this.virtualScroll=this.treeModel.virtualScroll,this._dispose=[ve(()=>this.virtualScroll.getViewportNodes(this.nodes).map(e=>e.index),e=>{this.viewportNodes=e.map(r=>this.nodes[r])},{compareStructural:!0,fireImmediately:!0}),ve(()=>this.nodes,e=>{this.viewportNodes=this.virtualScroll.getViewportNodes(e)})]}ngOnDestroy(){this._dispose.forEach(e=>e())}trackNode(e,r){return r.id}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=F({type:t,selectors:[["tree-node-collection"]],inputs:{nodes:"nodes",treeModel:"treeModel",templates:"templates"},standalone:!1,decls:1,vars:2,consts:[[4,"treeMobxAutorun"],[3,"node","index","templates",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","index","templates"]],template:function(r,i){r&1&&D(0,Ti,3,4,"ng-container",0),r&2&&u("treeMobxAutorun",ue(1,Te))},dependencies:()=>[on,ro,Se],encapsulation:2})}}return ht([Qn],t.prototype,"_nodes",void 0),ht([Qn],t.prototype,"viewportNodes",void 0),ht([zi],t.prototype,"marginTop",null),ht([qi],t.prototype,"setNodes",null),t})(),ro=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=F({type:t,selectors:[["TreeNode"],["tree-node"]],inputs:{node:"node",index:"index",templates:"templates"},standalone:!1,decls:1,vars:2,consts:[[4,"treeMobxAutorun"],[3,"class","tree-node","tree-node-expanded","tree-node-collapsed","tree-node-leaf","tree-node-active","tree-node-focused",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"dropIndex","node",4,"ngIf"],[3,"node","index","templates"],[3,"node","templates"],[3,"dropIndex","node"]],template:function(r,i){r&1&&D(0,Mi,3,8,"ng-container",0),r&2&&u("treeMobxAutorun",ue(1,Te))},dependencies:[ne,Pe,no,nr,to,Se],encapsulation:2})}}return t})(),io=(()=>{class t{constructor(e,r){this.elementRef=e,this.virtualScroll=r,this.setViewport=this.throttle(()=>{this.virtualScroll.setViewport(this.elementRef.nativeElement)},17),this.scrollEventHandler=this.setViewport.bind(this)}ngOnInit(){this.virtualScroll.init()}ngAfterViewInit(){setTimeout(()=>{this.setViewport(),this.virtualScroll.fireEvent({eventName:E.initialized})}),this.elementRef.nativeElement.addEventListener("scroll",this.scrollEventHandler)}ngOnDestroy(){this.virtualScroll.clear(),this.elementRef.nativeElement.removeEventListener("scroll",this.scrollEventHandler)}getTotalHeight(){return this.virtualScroll.isEnabled()&&this.virtualScroll.totalHeight+"px"||"auto"}throttle(e,r){let i=0;return function(){let o=Date.now();o-i>=r&&(e(),i=o)}}static{this.\u0275fac=function(r){return new(r||t)(x(ze),x($))}}static{this.\u0275cmp=F({type:t,selectors:[["tree-viewport"]],standalone:!1,features:[Nt([$])],ngContentSelectors:Ri,decls:1,vars:2,consts:[[4,"treeMobxAutorun"]],template:function(r,i){r&1&&(Qt(),D(0,Vi,3,2,"ng-container",0)),r&2&&u("treeMobxAutorun",ue(1,Te))},dependencies:[Se],encapsulation:2})}}return t})(),Oo=(()=>{class t{set nodes(e){}set options(e){}set focused(e){this.treeModel.setFocus(e)}set state(e){this.treeModel.setState(e)}constructor(e,r){this.treeModel=e,this.treeDraggedElement=r,e.eventNames.forEach(i=>this[i]=new me),e.subscribeToState(i=>this.stateChange.emit(i))}onKeydown(e){if(!this.treeModel.isFocused||["input","textarea"].includes(document.activeElement.tagName.toLowerCase()))return;let r=this.treeModel.getFocusedNode();this.treeModel.performKeyAction(r,e)}onMousedown(e){function r(i,o){return i?i.localName===o?!1:r(i.parentElement,o):!0}r(e.target,"tree-root")&&this.treeModel.setFocus(!1)}ngOnChanges(e){(e.options||e.nodes)&&this.treeModel.setData({options:e.options&&e.options.currentValue,nodes:e.nodes&&e.nodes.currentValue,events:this.pick(this,this.treeModel.eventNames)})}sizeChanged(){this.viewportComponent.setViewport()}pick(e,r){return r.reduce((i,o)=>(e&&e.hasOwnProperty(o)&&(i[o]=e[o]),i),{})}static{this.\u0275fac=function(r){return new(r||t)(x(d),x(Ut))}}static{this.\u0275cmp=F({type:t,selectors:[["Tree"],["tree-root"]],contentQueries:function(r,i,o){if(r&1&&(Ve(o,Pi,5),Ve(o,Li,5),Ve(o,Fi,5),Ve(o,ji,5)),r&2){let s;ye(s=_e())&&(i.loadingTemplate=s.first),ye(s=_e())&&(i.treeNodeTemplate=s.first),ye(s=_e())&&(i.treeNodeWrapperTemplate=s.first),ye(s=_e())&&(i.treeNodeFullTemplate=s.first)}},viewQuery:function(r,i){if(r&1&&en(Bi,5),r&2){let o;ye(o=_e())&&(i.viewportComponent=o.first)}},hostBindings:function(r,i){r&1&&te("keydown",function(s){return i.onKeydown(s)},!1,bt)("mousedown",function(s){return i.onMousedown(s)},!1,bt)},inputs:{nodes:"nodes",options:"options",focused:"focused",state:"state"},outputs:{toggleExpanded:"toggleExpanded",activate:"activate",deactivate:"deactivate",nodeActivate:"nodeActivate",nodeDeactivate:"nodeDeactivate",select:"select",deselect:"deselect",focus:"focus",blur:"blur",updateData:"updateData",initialized:"initialized",moveNode:"moveNode",copyNode:"copyNode",loadNodeChildren:"loadNodeChildren",changeFilter:"changeFilter",event:"event",stateChange:"stateChange"},standalone:!1,features:[Nt([d]),Xt],decls:5,vars:6,consts:[["viewport",""],[1,"angular-tree-component"],[3,"nodes","treeModel","templates",4,"ngIf"],["class","empty-tree-drop-slot",3,"dropIndex","node",4,"ngIf"],[3,"nodes","treeModel","templates"],[1,"empty-tree-drop-slot",3,"dropIndex","node"]],template:function(r,i){r&1&&(R(0,"tree-viewport",null,0)(2,"div",1),D(3,Hi,1,8,"tree-node-collection",2)(4,Gi,1,2,"tree-node-drop-slot",3),j()()),r&2&&(m(2),be("node-dragging",i.treeDraggedElement.isDragging())("angular-tree-component-rtl",i.treeModel.options.rtl),m(),u("ngIf",i.treeModel.roots),m(),u("ngIf",i.treeModel.isEmptyTree()))},dependencies:[ne,nr,rr,io],encapsulation:2})}}return t})(),xo=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Yt({type:t})}static{this.\u0275inj=Kt({imports:[sn]})}}return t})();export{tr as a,Oo as b,xo as c};
